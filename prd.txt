Desarrollar un Sistema Integral de Gesti√≥n Municipal siguiendo las especificaciones del PRD proporcionado. Este prompt define el stack tecnol√≥gico, arquitectura y metodolog√≠a de desarrollo.

## üèóÔ∏è **STACK TECNOL√ìGICO**

### **Backend:**
- **Node.js 18+** con **Express.js**
- **JavaScript ES6+** (sintaxis moderna con async/await)
- **Prisma ORM** para PostgreSQL
- **JWT** (jsonwebtoken) para autenticaci√≥n
- **bcrypt** para hash de contrase√±as
- **Zod** para validaci√≥n de schemas
- **Multer** para upload de archivos
- **cors** y **helmet** para seguridad
- Testing: **Jest** + **Supertest**
- **ESLint** + **Prettier** para code quality
- **dotenv** para variables de entorno

### **Frontend:**
- **Next.js 14+** (App Router)
- **React 18+**
- **JavaScript** (sin TypeScript)
- **TailwindCSS** para estilos
- **shadcn/ui** para componentes base UI
- **Zustand** para estado global
- **React Hook Form** para formularios
- **Zod** para validaci√≥n de formularios
- **Tanstack Query (React Query)** para data fetching y cache
- **Axios** para peticiones HTTP
- **Recharts** para gr√°ficos y visualizaciones
- **Lucide React** para iconos
- **date-fns** para manejo de fechas
- **React Leaflet** o **Google Maps React** para mapas
- **prop-types** para validaci√≥n de props
- Testing: **Jest** + **React Testing Library**
- **ESLint** + **Prettier**

### **Base de Datos:**
- **PostgreSQL 14+**
- **Prisma** como ORM
- Migraciones versionadas con Prisma Migrate
- Seeds para datos de prueba

### **DevOps & Tools:**
- **Docker** + **Docker Compose** para desarrollo local
- **Git** con conventional commits
- **GitHub** o **GitLab** para repositorio
- **Postman** o **Thunder Client** para testing de APIs
- Variables de entorno separadas por ambiente (.env.local, .env.production)

## üìê **ARQUITECTURA DEL PROYECTO**

```
municipal-system/
‚îú‚îÄ‚îÄ backend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ jwt.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ multer.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validations.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ projects/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ controllers/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ routes.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validations.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ finance/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hr/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shared/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ middlewares/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ auth.middleware.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ error.middleware.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ validation.middleware.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ utils/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ response.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ errors.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ helpers.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ prisma/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ schema.prisma
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ migrations/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ seed.js
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ server.js
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ unit/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ integration/
‚îÇ   ‚îú‚îÄ‚îÄ .env.example
‚îÇ   ‚îú‚îÄ‚îÄ .eslintrc.js
‚îÇ   ‚îú‚îÄ‚îÄ .prettierrc
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ jest.config.js
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (auth)/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ login/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ registro/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ (dashboard)/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ page.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ proyectos/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ finanzas/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ rrhh/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ layout.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ globals.css
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ components/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ ui/              # shadcn/ui components
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ shared/
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Sidebar.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ Navbar.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ DataTable.jsx
‚îÇ   ‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ modules/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ projects/
‚îÇ   ‚îÇ   ‚îÇ       ‚îú‚îÄ‚îÄ finance/
‚îÇ   ‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ lib/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ api.js           # Axios config
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ queryClient.js   # React Query config
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ utils.js
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ hooks/
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useAuth.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ useProjects.js
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ store/
‚îÇ   ‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ authStore.js     # Zustand stores
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ constants/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ index.js
‚îÇ   ‚îú‚îÄ‚îÄ public/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ uploads/
‚îÇ   ‚îú‚îÄ‚îÄ tests/
‚îÇ   ‚îú‚îÄ‚îÄ .env.local.example
‚îÇ   ‚îú‚îÄ‚îÄ .eslintrc.js
‚îÇ   ‚îú‚îÄ‚îÄ .prettierrc
‚îÇ   ‚îú‚îÄ‚îÄ tailwind.config.js
‚îÇ   ‚îú‚îÄ‚îÄ next.config.js
‚îÇ   ‚îú‚îÄ‚îÄ package.json
‚îÇ   ‚îî‚îÄ‚îÄ jest.config.js
‚îÇ
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .gitignore
‚îî‚îÄ‚îÄ README.md
```

## üé® **GU√çA DE DISE√ëO Y UX**

### **Paleta de Colores:**
```javascript
// tailwind.config.js
module.exports = {
  theme: {
    extend: {
      colors: {
        primary: {
          50: '#eff6ff',
          100: '#dbeafe',
          500: '#3b82f6',
          600: '#2563eb',
          700: '#1d4ed8',
          900: '#1e3a8a',
        },
        secondary: {
          500: '#64748b',
          600: '#475569',
        },
        success: '#10b981',
        warning: '#f59e0b',
        danger: '#ef4444',
      }
    }
  }
}
```

### **Principios de Dise√±o:**
- **Estilo moderno y limpio** (inspirado en Linear, Vercel, Notion)
- **Componentes consistentes** usando shadcn/ui como base
- **Espaciado generoso** (clase de Tailwind: space-y-4, gap-6, etc.)
- **Tipograf√≠a clara:** Inter o system fonts
- **Responsive:** Mobile-first
- **Feedback visual:**
  - Skeleton loaders durante carga
  - Toast notifications para acciones
  - Estados de loading en botones
  - Animaciones sutiles con Tailwind transitions
- **Manejo de estados:**
  - Empty states con ilustraciones o mensajes claros
  - Error states con mensajes accionables
  - Loading states consistentes

### **Componentes shadcn/ui a Usar:**
```bash
npx shadcn-ui@latest add button
npx shadcn-ui@latest add card
npx shadcn-ui@latest add input
npx shadcn-ui@latest add label
npx shadcn-ui@latest add select
npx shadcn-ui@latest add table
npx shadcn-ui@latest add dialog
npx shadcn-ui@latest add dropdown-menu
npx shadcn-ui@latest add toast
npx shadcn-ui@latest add tabs
npx shadcn-ui@latest add badge
npx shadcn-ui@latest add alert
npx shadcn-ui@latest add skeleton
npx shadcn-ui@latest add avatar
```

## üîê **PATRONES DE SEGURIDAD**

### **Backend:**
```javascript
// Middleware de autenticaci√≥n
export const authenticate = async (req, res, next) => {
  try {
    const token = req.headers.authorization?.replace('Bearer ', '');
    if (!token) throw new Error('Token no proporcionado');
    
    const decoded = jwt.verify(token, process.env.JWT_SECRET);
    req.user = await prisma.user.findUnique({ where: { id: decoded.userId } });
    
    if (!req.user) throw new Error('Usuario no encontrado');
    next();
  } catch (error) {
    return res.status(401).json({ error: 'No autorizado' });
  }
};

// Middleware de autorizaci√≥n por roles
export const authorize = (...allowedRoles) => {
  return (req, res, next) => {
    if (!allowedRoles.includes(req.user.role)) {
      return res.status(403).json({ error: 'No tienes permisos' });
    }
    next();
  };
};

// Validaci√≥n con Zod
import { z } from 'zod';

export const validate = (schema) => {
  return (req, res, next) => {
    try {
      schema.parse(req.body);
      next();
    } catch (error) {
      return res.status(400).json({ errors: error.errors });
    }
  };
};
```

### **Frontend:**
```javascript
// Hook de autenticaci√≥n
import { create } from 'zustand';

export const useAuthStore = create((set) => ({
  user: null,
  token: null,
  isAuthenticated: false,
  login: (user, token) => {
    localStorage.setItem('token', token);
    set({ user, token, isAuthenticated: true });
  },
  logout: () => {
    localStorage.removeItem('token');
    set({ user: null, token: null, isAuthenticated: false });
  },
}));

// Axios interceptor
import axios from 'axios';

const api = axios.create({
  baseURL: process.env.NEXT_PUBLIC_API_URL,
});

api.interceptors.request.use((config) => {
  const token = localStorage.getItem('token');
  if (token) {
    config.headers.Authorization = `Bearer ${token}`;
  }
  return config;
});

export default api;
```

## üìä **ESTRUCTURA DE DATOS (Prisma Schema)**

### **Modelos Base:**
```prisma
// prisma/schema.prisma

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Autenticaci√≥n
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  firstName String
  lastName  String
  role      Role     @default(USER)
  isActive  Boolean  @default(true)
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  projects  Project[] @relation("ProjectManager")
  
  @@map("users")
}

enum Role {
  SUPER_ADMIN
  ADMIN
  DIRECTOR
  MANAGER
  USER
}

// Proyectos
model Project {
  id            String        @id @default(uuid())
  code          String        @unique
  name          String
  description   String?       @db.Text
  budget        Decimal       @db.Decimal(15,2)
  status        ProjectStatus @default(PLANNING)
  priority      Priority      @default(MEDIUM)
  startDate     DateTime
  endDate       DateTime
  location      String
  latitude      Float?
  longitude     Float?
  sector        String
  beneficiaries Int?
  category      String
  
  managerId     String
  manager       User          @relation("ProjectManager", fields: [managerId], references: [id])
  
  milestones    Milestone[]
  expenses      ProjectExpense[]
  photos        ProjectPhoto[]
  
  createdAt     DateTime      @default(now())
  updatedAt     DateTime      @updatedAt
  
  @@index([status])
  @@index([sector])
  @@map("projects")
}

model Milestone {
  id          String          @id @default(uuid())
  projectId   String
  project     Project         @relation(fields: [projectId], references: [id], onDelete: Cascade)
  name        String
  description String?         @db.Text
  dueDate     DateTime
  completedAt DateTime?
  progress    Int             @default(0)
  status      MilestoneStatus @default(PENDING)
  
  createdAt   DateTime        @default(now())
  updatedAt   DateTime        @updatedAt
  
  @@map("milestones")
}

model ProjectExpense {
  id        String   @id @default(uuid())
  projectId String
  project   Project  @relation(fields: [projectId], references: [id], onDelete: Cascade)
  concept   String
  amount    Decimal  @db.Decimal(15,2)
  date      DateTime
  category  String
  invoice   String?
  
  createdAt DateTime @default(now())
  
  @@map("project_expenses")
}

model ProjectPhoto {
  id        String    @id @default(uuid())
  projectId String
  project   Project   @relation(fields: [projectId], references: [id], onDelete: Cascade)
  url       String
  caption   String?
  type      PhotoType
  takenAt   DateTime
  
  createdAt DateTime  @default(now())
  
  @@map("project_photos")
}

enum ProjectStatus {
  PLANNING
  IN_PROGRESS
  COMPLETED
  PAUSED
  CANCELLED
}

enum Priority {
  LOW
  MEDIUM
  HIGH
  CRITICAL
}

enum MilestoneStatus {
  PENDING
  IN_PROGRESS
  COMPLETED
  DELAYED
}

enum PhotoType {
  BEFORE
  DURING
  AFTER
}
```

## üîÑ **METODOLOG√çA DE DESARROLLO √ÅGIL**

### **Principios:**
1. **Desarrollo por m√≥dulo completo** (Backend + Frontend + Tests)
2. **Cada m√≥dulo debe ser funcional y desplegable**
3. **Commits peque√±os y frecuentes** con mensajes descriptivos
4. **Tests antes de merge** (m√≠nimo 70% coverage)
5. **Code review** antes de merge a main
6. **Documentaci√≥n inline** con JSDoc

### **Flujo de Desarrollo:**
```
Para cada m√≥dulo/feature:

1. üìã Planificaci√≥n
   - Revisar PRD
   - Definir alcance del m√≥dulo
   - Dise√±ar schema de base de datos
   
2. üóÑÔ∏è Base de Datos
   - Actualizar schema.prisma
   - Crear migraci√≥n: npx prisma migrate dev --name add_projects
   - Crear seed si es necesario
   
3. ‚öôÔ∏è Backend API
   - Crear estructura de carpetas del m√≥dulo
   - Implementar servicios (l√≥gica de negocio)
   - Implementar controllers (handlers HTTP)
   - Crear validaciones con Zod
   - Definir rutas
   - Integrar en server.js
   
4. üß™ Tests Backend
   - Tests unitarios de servicios
   - Tests de integraci√≥n de endpoints
   - Ejecutar: npm test
   
5. üé® Frontend
   - Crear p√°ginas en app router
   - Desarrollar componentes UI
   - Implementar hooks personalizados
   - Integrar con React Query
   - Conectar con API
   
6. üß™ Tests Frontend
   - Tests de componentes
   - Tests de integraci√≥n
   - Ejecutar: npm test
   
7. üìù Documentaci√≥n
   - README del m√≥dulo
   - Comentarios JSDoc en funciones complejas
   - Actualizar API docs
   
8. üöÄ Deploy
   - Merge a staging
   - Probar en ambiente staging
   - Deploy a producci√≥n si todo OK
   
9. ‚ôªÔ∏è Iterar
   - Recoger feedback
   - Hacer mejoras
   - Siguiente m√≥dulo
```

### **Convenciones de C√≥digo:**

**Commits:**
```bash
feat(projects): add project creation endpoint
fix(auth): resolve token expiration issue
docs(readme): update installation steps
test(projects): add unit tests for project service
refactor(finance): improve budget calculation logic
```

**Nombres de archivos:**
- Backend: camelCase para archivos JS (`projectService.js`)
- Frontend: PascalCase para componentes (`ProjectCard.jsx`)
- Rutas: kebab-case (`project-routes.js`)

**Estructura de funciones:**
```javascript
/**
 * Crea un nuevo proyecto en el sistema
 * @param {Object} projectData - Datos del proyecto
 * @param {string} projectData.name - Nombre del proyecto
 * @param {number} projectData.budget - Presupuesto total
 * @param {string} userId - ID del usuario creador
 * @returns {Promise<Object>} Proyecto creado
 * @throws {Error} Si faltan datos requeridos
 */
export const createProject = async (projectData, userId) => {
  // Validaci√≥n
  if (!projectData.name || !projectData.budget) {
    throw new Error('Faltan datos requeridos');
  }
  
  // L√≥gica
  const project = await prisma.project.create({
    data: {
      ...projectData,
      managerId: userId,
      code: generateProjectCode(),
    },
  });
  
  return project;
};
```

## üß™ **ESTRATEGIA DE TESTING**

### **Backend (Jest + Supertest):**
```javascript
// tests/unit/projectService.test.js
import { describe, test, expect, beforeAll, afterAll } from '@jest/globals';
import { createProject, getProjects } from '../../src/modules/projects/services/projectService.js';

describe('Project Service', () => {
  test('should create a project successfully', async () => {
    const projectData = {
      name: 'Test Project',
      budget: 10000,
      startDate: new Date(),
      endDate: new Date(),
      sector: 'Centro',
      category: 'Vialidad',
    };
    
    const project = await createProject(projectData, 'user-id');
    
    expect(project).toHaveProperty('id');
    expect(project.name).toBe('Test Project');
    expect(project.code).toMatch(/^PRO-\d{4}-\d+$/);
  });
  
  test('should throw error if required fields are missing', async () => {
    await expect(createProject({}, 'user-id')).rejects.toThrow();
  });
});

// tests/integration/projectRoutes.test.js
import request from 'supertest';
import app from '../../src/server.js';

describe('POST /api/projects', () => {
  let authToken;
  
  beforeAll(async () => {
    // Login para obtener token
    const res = await request(app)
      .post('/api/auth/login')
      .send({ email: 'test@test.com', password: 'password' });
    authToken = res.body.token;
  });
  
  test('should create project with valid data', async () => {
    const res = await request(app)
      .post('/api/projects')
      .set('Authorization', `Bearer ${authToken}`)
      .send({
        name: 'Nuevo Proyecto',
        budget: 50000,
        startDate: '2025-01-01',
        endDate: '2025-12-31',
        sector: 'Norte',
        category: 'Educaci√≥n',
      });
    
    expect(res.status).toBe(201);
    expect(res.body).toHaveProperty('id');
  });
  
  test('should return 401 without token', async () => {
    const res = await request(app)
      .post('/api/projects')
      .send({ name: 'Test' });
    
    expect(res.status).toBe(401);
  });
});
```

### **Frontend (React Testing Library):**
```javascript
// tests/components/ProjectCard.test.js
import { render, screen } from '@testing-library/react';
import ProjectCard from '@/components/modules/projects/ProjectCard';

describe('ProjectCard', () => {
  const mockProject = {
    id: '1',
    code: 'PRO-2025-001',
    name: 'Reparaci√≥n de Calle',
    budget: 100000,
    status: 'IN_PROGRESS',
    sector: 'Centro',
  };
  
  test('renders project information correctly', () => {
    render(<ProjectCard project={mockProject} />);
    
    expect(screen.getByText('PRO-2025-001')).toBeInTheDocument();
    expect(screen.getByText('Reparaci√≥n de Calle')).toBeInTheDocument();
    expect(screen.getByText('Centro')).toBeInTheDocument();
  });
  
  test('displays correct status badge', () => {
    render(<ProjectCard project={mockProject} />);
    
    const statusBadge = screen.getByText(/en proceso/i);
    expect(statusBadge).toBeInTheDocument();
    expect(statusBadge).toHaveClass('bg-blue-100');
  });
});
```

## üöÄ **ORDEN DE IMPLEMENTACI√ìN PRIORIZADO**

### **FASE 0: CORE (Semana 1-2)**
```
‚úÖ Setup del proyecto
‚úÖ Docker compose (PostgreSQL, backend, frontend)
‚úÖ Configuraci√≥n de Prisma
‚úÖ Setup de ESLint + Prettier
‚úÖ Autenticaci√≥n completa (JWT)
‚úÖ RBAC b√°sico (roles y permisos)
‚úÖ Layout base del dashboard
‚úÖ Componentes UI base (shadcn/ui)
‚úÖ Tests de autenticaci√≥n
```

### **FASE 1: M√ìDULO DE PROYECTOS (Semana 3-4)**
```
‚úÖ Schema de BD para proyectos
‚úÖ API completa de proyectos (CRUD)
‚úÖ API de hitos y gastos
‚úÖ Upload de fotos
‚úÖ Tests backend
‚úÖ P√°ginas frontend: lista, detalle, crear/editar
‚úÖ Dashboard de proyectos con gr√°ficos
‚úÖ Mapa de proyectos
‚úÖ Tests frontend
```

### **FASE 2: M√ìDULO DE FINANZAS (Semana 5-6)**
```
‚úÖ Schema de BD (presupuesto, transacciones, cuentas)
‚úÖ API de presupuesto
‚úÖ API de transacciones
‚úÖ API de cuentas bancarias
‚úÖ Tests backend
‚úÖ P√°ginas frontend de finanzas
‚úÖ Dashboard financiero
‚úÖ Reportes y gr√°ficos
‚úÖ Tests frontend
```

### **FASE 3: M√ìDULO DE RECURSOS HUMANOS (Semana 7-8)**
```
‚úÖ Schema de BD (empleados, n√≥mina, asistencia)
‚úÖ API de gesti√≥n de personal
‚úÖ API de n√≥mina
‚úÖ API de vacaciones y permisos
‚úÖ Tests backend
‚úÖ P√°ginas frontend de RRHH
‚úÖ Gesti√≥n de expedientes
‚úÖ Control de asistencia
‚úÖ Tests frontend
```

### **Fases Siguientes:**
- FASE 4: M√≥dulo Tributario
- FASE 5: M√≥dulo de Catastro
- FASE 6: M√≥dulo de Participaci√≥n Ciudadana
- FASE 7: M√≥dulo de Servicios P√∫blicos
- FASE 8: Portal P√∫blico
- FASE 9: App M√≥vil

## üê≥ **CONFIGURACI√ìN DOCKER**

```yaml
# docker-compose.yml
version: '3.8'

services:
  postgres:
    image: postgres:14-alpine
    container_name: municipal_db
    environment:
      POSTGRES_USER: municipal
      POSTGRES_PASSWORD: municipal123
      POSTGRES_DB: municipal_system
    ports:
      - "5432:5432"
    volumes:
      - postgres_data:/var/lib/postgresql/data
    networks:
      - municipal_network

  backend:
    build: ./backend
    container_name: municipal_backend
    environment:
      DATABASE_URL: postgresql://municipal:municipal123@postgres:5432/municipal_system
      JWT_SECRET: your-secret-key-change-in-production
      NODE_ENV: development
      PORT: 4000
    ports:
      - "4000:4000"
    volumes:
      - ./backend:/app
      - /app/node_modules
    depends_on:
      - postgres
    networks:
      - municipal_network
    command: npm run dev

  frontend:
    build: ./frontend
    container_name: municipal_frontend
    environment:
      NEXT_PUBLIC_API_URL: http://localhost:4000/api
    ports:
      - "3000:3000"
    volumes:
      - ./frontend:/app
      - /app/node_modules
      - /app/.next
    depends_on:
      - backend
    networks:
      - municipal_network
    command: npm run dev

volumes:
  postgres_data:

networks:
  municipal_network:
    driver: bridge
```

## üì¶ **SCRIPTS NPM**

### **Backend package.json:**
```json
{
  "scripts": {
    "dev": "nodemon src/server.js",
    "start": "node src/server.js",
    "test": "jest --coverage",
    "test:watch": "jest --watch",
    "prisma:migrate": "prisma migrate dev",
    "prisma:generate": "prisma generate",
    "prisma:seed": "node prisma/seed.js",
    "prisma:studio": "prisma studio",
    "lint": "eslint src/",
    "lint:fix": "eslint src/ --fix"
  }
}
```

### **Frontend package.json:**
```json
{
  "scripts": {
    "dev": "next dev",
    "build": "next build",
    "start": "next start",
    "test": "jest --coverage",
    "test:watch": "jest --watch",
    "lint": "next lint",
    "lint:fix": "next lint --fix"
  }
}
```

## üìù **DOCUMENTACI√ìN REQUERIDA**

Para cada m√≥dulo completado:
1. **README.md** del m√≥dulo con:
   - Descripci√≥n general
   - Endpoints disponibles
   - Ejemplos de uso
   - Modelos de datos
2. **Comentarios JSDoc** en funciones complejas
3. **Variables de entorno** documentadas en .env.example
4. **Decisiones t√©cnicas** importantes en comentarios

## üéØ **CRITERIOS DE CALIDAD**

Antes de considerar un m√≥dulo completo:
- ‚úÖ Todos los tests pasan (backend y frontend)
- ‚úÖ Coverage de tests > 70%
- ‚úÖ Sin errores de ESLint
- ‚úÖ API documentada
- ‚úÖ Frontend responsive (mobile, tablet, desktop)
- ‚úÖ Manejo de errores implementado
- ‚úÖ Loading states en todas las operaciones async
- ‚úÖ Validaciones en frontend y backend
- ‚úÖ Funciona en Docker

## üö¶ **PR√ìXIMOS PASOS**

1. Revisar el PRD completo del sistema
2. Configurar el entorno de desarrollo local
3. Comenzar con FASE 0 (Core)
4. Implementar autenticaci√≥n
5. Crear layout base del dashboard
6. Continuar con m√≥dulo de proyectos
7. Desplegar versi√≥n inicial a staging
8. Iterar y mejorar

---

**NOTA IMPORTANTE:** Este sistema se construir√° de forma incremental. Cada m√≥dulo debe ser funcional antes de pasar al siguiente. La prioridad es tener m√≥dulos productivos r√°pidamente, no perfecci√≥n desde el inicio. Itera y mejora continuamente bas√°ndote en feedback.
# Desarrollo Detallado por M√≥dulo - Sistema de Gesti√≥n Municipal

## üèõÔ∏è **1. M√ìDULO DE GESTI√ìN FINANCIERA Y PRESUPUESTARIA**

### **¬øQu√© hace este m√≥dulo?**
Controla todo el dinero del municipio desde que se planifica hasta que se gasta, cumpliendo con las leyes venezolanas de administraci√≥n financiera p√∫blica.

### **Funcionalidades Detalladas:**

**A) Elaboraci√≥n del Presupuesto Anual:**
- Permite crear el anteproyecto de presupuesto para el a√±o fiscal
- Distribuye los ingresos estimados (situado, tributos propios, transferencias)
- Asigna recursos por partidas presupuestarias seg√∫n clasificador ONAPRE
- Distribuye por: secretar√≠as, proyectos, programas
- Genera documentos oficiales para presentar al Concejo Municipal
- Permite modificaciones presupuestarias (cr√©ditos adicionales, traspasos, rectificaciones)

**B) Registro Contable:**
- Lleva la contabilidad siguiendo el Plan de Cuentas Nacional
- Registra cada operaci√≥n con asiento contable autom√°tico
- Genera: libro diario, mayor, balance de comprobaci√≥n
- Estados financieros: balance general, estado de resultados, flujo de efectivo
- Conciliaciones bancarias mensuales
- Cierre contable mensual y anual

**C) Proceso de Ejecuci√≥n del Gasto:**
```
1. Compromiso ‚Üí Se reserva presupuesto (cuando se firma un contrato o PO)
2. Causado ‚Üí Se recibe el bien/servicio (genera cuenta por pagar)
3. Pagado ‚Üí Se efect√∫a el pago (se descarga de tesorer√≠a)
```
- Control de disponibilidad presupuestaria en tiempo real
- No permite gastar m√°s de lo aprobado
- Genera √≥rdenes de pago y comprobantes

**D) Tesorer√≠a:**
- Control de todas las cuentas bancarias del municipio
- Registro de ingresos: situado constitucional, tributos, multas
- Programaci√≥n de pagos seg√∫n prioridades y disponibilidad
- Emisi√≥n de cheques o transferencias electr√≥nicas
- Conciliaci√≥n con estados de cuenta bancarios
- Proyecci√≥n de flujo de caja (cu√°nto dinero habr√° disponible)
- Control de fondos: rotatorios, anticipos, cajas chicas

**E) Reportes ONAPRE:**
- Genera autom√°ticamente los formatos exigidos:
  - Form 1013 (Ejecuci√≥n financiera del presupuesto)
  - Form 2345 (Balance general)
  - Form 3001 (Ejecuci√≥n f√≠sica)
- Exportaci√≥n en formato Excel/PDF
- Cumplimiento de plazos de entrega

**F) An√°lisis Financiero:**
- Comparativo presupuestado vs ejecutado
- Indicadores: nivel de ejecuci√≥n, eficiencia del gasto
- Alertas de sobreejecci√≥n o subejecuci√≥n
- Reportes para toma de decisiones del alcalde

---

## üí∞ **2. M√ìDULO DE GESTI√ìN TRIBUTARIA**

### **¬øQu√© hace este m√≥dulo?**
Administra todos los impuestos, tasas y contribuciones que cobra la alcald√≠a, desde el registro del contribuyente hasta el cobro y control de la morosidad.

### **Funcionalidades Detalladas:**

**A) Registro de Contribuyentes:**
- Base de datos de todos los ciudadanos y empresas del municipio
- Datos: nombre, RIF/CI, direcci√≥n, tel√©fono, email
- Clasificaci√≥n: persona natural/jur√≠dica, tipo de actividad
- Historial tributario completo
- Actualizaci√≥n de datos en l√≠nea por el contribuyente

**B) Impuesto sobre Actividades Econ√≥micas (Patente):**
- Registro de establecimientos comerciales e industriales
- Clasificaci√≥n seg√∫n actividad econ√≥mica (c√≥digo CIIU)
- C√°lculo autom√°tico seg√∫n ordenanza municipal
- Variables: ingresos brutos, categor√≠a, tasa aplicable
- Control de licencias: nueva, renovaci√≥n, traspaso, cese
- Inspecciones fiscales: programaci√≥n y registro
- Generaci√≥n de planilla de pago
- Control de solvencias vigentes

**C) Impuesto sobre Inmuebles Urbanos:**
- Integraci√≥n con catastro municipal
- Registro de cada inmueble: ubicaci√≥n, √°rea, uso, propietario
- C√°lculo del aval√∫o catastral (valor del terreno + construcci√≥n)
- Aplicaci√≥n de al√≠cuota seg√∫n zona y uso
- Actualizaci√≥n anual de valores
- Exoneraciones: adultos mayores, discapacitados, seg√∫n ordenanza
- Generaci√≥n de factura anual o trimestral
- Notificaci√≥n autom√°tica a propietarios

**D) Impuesto sobre Veh√≠culos:**
- Registro de veh√≠culos del municipio
- Datos: placa, marca, modelo, a√±o, propietario
- C√°lculo seg√∫n aval√∫o y a√±o del veh√≠culo
- Generaci√≥n de planilla anual
- Control de pago y emisi√≥n de calcoman√≠a/solvencia

**E) Portal de Autopago:**
- Ciudadano ingresa con RIF/CI
- Consulta sus deudas pendientes
- Genera planilla de pago con c√≥digo de referencia
- Opciones de pago:
  - Pago m√≥vil (C2P con bancos)
  - Transferencia bancaria
  - Punto de venta en taquillas municipales
  - Bancos y corresponsales autorizados
- Descarga recibo digital inmediatamente
- Solicita solvencia municipal en l√≠nea

**F) Gesti√≥n de Cobranza:**
- Identificaci√≥n autom√°tica de morosos
- Clasificaci√≥n por antig√ºedad de deuda
- Emisi√≥n de notificaciones escalonadas:
  1. Recordatorio amigable (antes del vencimiento)
  2. Aviso de mora (despu√©s del vencimiento)
  3. Intimaci√≥n formal
  4. Pre-aviso de medidas coactivas
- C√°lculo autom√°tico de intereses moratorios
- Convenios de pago: plan de cuotas personalizables
- Registro de gesti√≥n telef√≥nica y presencial
- Reportes de recuperaci√≥n de cartera

**G) Facturaci√≥n de Tasas:**
- Tasa de aseo urbano (domiciliario y comercial)
- Tasas administrativas: copias certificadas, planos, permisos
- Uso de espacios: kioscos, mercados, ferias
- Servicios de cementerio
- Impuestos por espect√°culos p√∫blicos
- Ocupaci√≥n de v√≠a p√∫blica

**H) Solvencias y Certificaciones:**
- Generaci√≥n autom√°tica si est√° solvente
- C√≥digo QR para verificaci√≥n en l√≠nea
- Vigencia temporal configurable
- Restricci√≥n si hay deudas pendientes
- Historial de solvencias emitidas

---

## üìã **3. M√ìDULO DE CATASTRO Y ORDENAMIENTO TERRITORIAL**

### **¬øQu√© hace este m√≥dulo?**
Mantiene un registro actualizado de todos los inmuebles del municipio y controla que las construcciones cumplan con las normas urban√≠sticas.

### **Funcionalidades Detalladas:**

**A) Catastro de Inmuebles:**
- Ficha catastral completa de cada inmueble:
  - Ubicaci√≥n exacta (direcci√≥n, coordenadas GPS)
  - Linderos y medidas
  - √Årea de terreno y construcci√≥n
  - N√∫mero de plantas, ambientes
  - Uso actual: residencial, comercial, industrial, bald√≠o
  - Servicios: agua, electricidad, cloacas, gas
  - Estado de conservaci√≥n
  - A√±o de construcci√≥n
- Fotograf√≠a fachada y vistas
- Registro de propietarios hist√≥rico
- Documento de propiedad (protocolizaci√≥n)
- Vinculaci√≥n con registro inmobiliario

**B) Sistema de Informaci√≥n Geogr√°fica (SIG):**
- Mapa digital del municipio completo
- Visualizaci√≥n de cada parcela
- Capas de informaci√≥n:
  - Zonificaci√≥n (zonas residenciales, comerciales, industriales)
  - √Åreas protegidas
  - Vialidad
  - Servicios p√∫blicos (escuelas, ambulatorios, plazas)
  - Redes de servicios (agua, cloacas, electricidad)
- Herramientas de medici√≥n: distancias, √°reas, per√≠metros
- Ubicaci√≥n de problemas ciudadanos en mapa
- Exportaci√≥n de mapas y planos

**C) Variables Urbanas:**
- Registro de normas por zona:
  - Retiros (frontal, lateral, posterior)
  - Altura m√°xima permitida
  - Densidad de construcci√≥n
  - Porcentaje de construcci√≥n
  - Uso permitido del suelo
  - Estacionamientos requeridos
- Consulta f√°cil por direcci√≥n o parcela
- Aplicaci√≥n autom√°tica en evaluaci√≥n de proyectos

**D) Permisos de Construcci√≥n:**

**Flujo completo:**
```
1. Solicitud:
   - Ciudadano/empresa presenta proyecto
   - Sube documentos: planos arquitect√≥nicos, ingenier√≠as, documento de propiedad
   - Paga tasa de revisi√≥n

2. Revisi√≥n T√©cnica:
   - Ingeniero municipal revisa cumplimiento de variables urbanas
   - Verifica c√°lculos estructurales
   - Chequea normas de bomberos, sanitarias
   - Puede solicitar correcciones

3. Aprobaci√≥n:
   - Si cumple, se emite permiso de construcci√≥n
   - Se asigna n√∫mero de expediente
   - Se cobra tasa seg√∫n m¬≤ a construir

4. Control de Obra:
   - Inspecciones programadas durante construcci√≥n
   - Registro fotogr√°fico
   - Verificaci√≥n de lo construido vs aprobado
   - Paralizaciones si hay incumplimientos

5. Conformidad Final:
   - Inspecci√≥n de obra terminada
   - Emisi√≥n de conformidad de construcci√≥n
   - Actualizaci√≥n del catastro
```

**E) Consultas P√∫blicas:**
- Portal web donde cualquiera puede:
  - Ver el plano de zonificaci√≥n
  - Consultar variables de su parcela
  - Conocer estado de su tr√°mite de construcci√≥n
  - Descargar formularios

**F) Control Urbano:**
- Registro de denuncias: construcciones ilegales, invasiones
- Programaci√≥n de inspecciones de oficio
- Notificaciones y sanciones
- Seguimiento de demoliciones o regularizaciones

---

## üèóÔ∏è **4. M√ìDULO DE GESTI√ìN DE PROYECTOS**

### **¬øQu√© hace este m√≥dulo?**
Planifica, ejecuta y controla todas las obras y proyectos de la alcald√≠a, desde arreglar una calle hasta construir un ambulatorio.

### **Funcionalidades Detalladas:**

**A) Banco de Proyectos:**
- Portafolio completo de iniciativas municipales
- Estados: idea, formulado, aprobado, en ejecuci√≥n, culminado, paralizado
- Clasificaci√≥n: obra civil, social, tecnol√≥gico, institucional
- √Årea: vialidad, salud, educaci√≥n, deportes, seguridad, etc.
- Origen: plan de gobierno, presupuesto participativo, emergencia

**B) Formulaci√≥n de Proyectos:**

**Ficha T√©cnica completa:**
- Nombre del proyecto
- Justificaci√≥n: ¬øPor qu√© es necesario?
- Objetivos: General y espec√≠ficos
- Metas cuantificables
- Beneficiarios: N√∫mero de personas/familias/sectores
- Ubicaci√≥n geogr√°fica (con mapa)
- Descripci√≥n t√©cnica detallada
- Especificaciones t√©cnicas
- Planos y dise√±os (carga de archivos)

**Presupuesto detallado:**
- Desagregado por partidas
- Materiales con cantidades y costos unitarios
- Mano de obra
- Equipos y maquinarias
- Costos indirectos
- Fuente de financiamiento: presupuesto ordinario, FUS, Fontur, endeudamiento, etc.
- An√°lisis de precios unitarios (APU)

**C) Cronograma de Ejecuci√≥n:**
- Diagrama de Gantt visual
- Actividades con fechas inicio/fin
- Dependencias entre tareas
- Ruta cr√≠tica
- Hitos importantes
- Asignaci√≥n de responsables por actividad
- Porcentaje de avance planificado vs real

**D) Contrataci√≥n:**
- Proceso de licitaci√≥n o contrataci√≥n directa
- Registro de empresas invitadas/participantes
- Evaluaci√≥n de ofertas
- Adjudicaci√≥n
- Contrato digital con anexos
- √ìrdenes de inicio
- P√≥lizas y garant√≠as

**E) Seguimiento y Control:**

**Avance F√≠sico:**
- Registro semanal o quincenal de actividades ejecutadas
- Porcentaje de avance por partida
- Fotograf√≠as del progreso (antes/durante/despu√©s)
- Comparaci√≥n planificado vs ejecutado
- Alertas de retrasos

**Avance Financiero:**
- Valuaciones de obra
- Certificaci√≥n de trabajos ejecutados
- Pagos realizados al contratista
- Control del monto comprometido vs pagado
- Anticipos y retenciones
- Cierre financiero

**F) Control de Calidad:**
- Inspecciones t√©cnicas
- Ensayos de laboratorio (concreto, asfalto, suelos)
- Registro de no conformidades
- Acciones correctivas
- Actas de recepci√≥n provisional y definitiva

**G) Gesti√≥n de Cambios:**
- √ìrdenes de cambio (modificaciones al proyecto original)
- Impacto en costo y tiempo
- Aprobaciones requeridas
- Trazabilidad de modificaciones

**H) Reportes Gerenciales:**
- Dashboard de todos los proyectos activos
- Sem√°foros: verde (dentro de plazo), amarillo (riesgo), rojo (atrasado)
- Inversi√≥n ejecutada del municipio
- Proyectos por culminar en el per√≠odo
- Indicadores de eficiencia

**I) Cierre de Proyecto:**
- Recepci√≥n definitiva de obra
- Acta de finiquito
- Evaluaci√≥n de desempe√±o del contratista
- Lecciones aprendidas
- Entrega a comunidad
- Registro en inventario de bienes (si aplica)

---

## üë• **5. M√ìDULO DE PARTICIPACI√ìN CIUDADANA**

### **¬øQu√© hace este m√≥dulo?**
Crea un canal directo entre ciudadanos y gobierno municipal para reportar problemas, hacer seguimiento y fomentar la transparencia.

### **Funcionalidades Detalladas:**

**A) Sistema de Reportes Ciudadanos (tipo "311"):**

**Proceso del Ciudadano:**
```
1. Ingresa al portal/app m√≥vil
2. Selecciona tipo de problema:
   - Baches en calles
   - Alumbrado p√∫blico da√±ado
   - Acumulaci√≥n de basura
   - Fugas de agua
   - √Årboles ca√≠dos o peligrosos
   - Sem√°foros da√±ados
   - Alcantarillas tapadas
   - Plagas (ratas, moscas, zancudos)
   - Ruido excesivo
   - Animales muertos en v√≠a p√∫blica
   - Se√±alizaci√≥n vial da√±ada
   - Otros

3. Describe el problema (texto libre)

4. Geolocalizaci√≥n autom√°tica o manual en mapa

5. Sube hasta 5 fotos del problema

6. Datos de contacto (opcional para seguimiento)

7. Recibe n√∫mero de ticket √∫nico: RP-2025-00123

8. Confirmaci√≥n por email/SMS
```

**B) Gesti√≥n Interna Municipal:**

**Mesa de Control Central:**
- Recibe todos los reportes en tiempo real
- Dashboard con mapa de incidencias activas
- Clasificaci√≥n autom√°tica por √°rea responsable:
  - Servicios P√∫blicos
  - Obras
  - Ambiente
  - Ingenier√≠a Municipal
  - Protecci√≥n Civil
- Priorizaci√≥n:
  - Cr√≠tica: Peligro inminente (48h m√°ximo)
  - Alta: Afecta servicios esenciales (7 d√≠as)
  - Media: Afecta calidad de vida (15 d√≠as)
  - Baja: Mejoras menores (30 d√≠as)

**Asignaci√≥n y Trabajo:**
- Se asigna autom√°ticamente al departamento correspondiente
- Notificaci√≥n al supervisor responsable
- Supervisor asigna cuadrilla o personal espec√≠fico
- Personal de campo recibe tarea en app m√≥vil
- Van al sitio, verifican el problema
- Registran acciones tomadas
- Toman foto "despu√©s" de la soluci√≥n
- Marcan como "Resuelto"

**C) Estados del Ticket:**
```
Recibido ‚Üí En Revisi√≥n ‚Üí Asignado ‚Üí En Proceso ‚Üí Resuelto ‚Üí Cerrado ‚Üí Reabierto (si aplica)
```

**D) Comunicaci√≥n con el Ciudadano:**
- Notificaci√≥n autom√°tica en cada cambio de estado
- Tiempo transcurrido visible
- Puede comentar o agregar informaci√≥n adicional
- Recibe notificaci√≥n cuando se resuelve
- Se le pide calificar el servicio (1-5 estrellas)
- Puede reabre si no qued√≥ satisfecho

**E) Mapa de Calor Ciudadano:**
- Visualizaci√≥n geogr√°fica de todos los reportes
- Concentraci√≥n por zonas
- Filtros: por tipo, por fecha, por estado
- Identifica sectores con m√°s problemas
- Ayuda a planificar mantenimiento preventivo

**F) Estad√≠sticas y M√©tricas:**
- Total de reportes por per√≠odo
- Tiempo promedio de respuesta
- Porcentaje de resoluci√≥n
- Satisfacci√≥n ciudadana promedio
- Ranking de problemas m√°s frecuentes
- Comparativa entre parroquias
- Evoluci√≥n hist√≥rica

**G) Presupuesto Participativo:**

**Proceso anual:**
```
1. Convocatoria: La alcald√≠a destina % del presupuesto

2. Asambleas Comunitarias:
   - Se re√∫nen por sectores
   - Proponen proyectos para su comunidad
   - Priorizan necesidades

3. Registro de Propuestas:
   - Comunidades suben proyectos al sistema
   - Descripci√≥n, costo estimado, beneficiarios
   - Pueden subir videos o presentaciones

4. Evaluaci√≥n T√©cnica:
   - Alcald√≠a eval√∫a viabilidad
   - Costea cada proyecto con precisi√≥n
   - Descarta los no viables (explica por qu√©)

5. Votaci√≥n Ciudadana:
   - Portal de votaci√≥n abierto (con c√©dula)
   - Cada ciudadano vota por sus proyectos favoritos
   - Transparencia total del proceso

6. Resultados:
   - Se aprueban proyectos m√°s votados hasta agotar presupuesto
   - Publicaci√≥n de ganadores
   - Compromisos de ejecuci√≥n

7. Seguimiento:
   - Cada proyecto se ejecuta con seguimiento p√∫blico
   - La comunidad ve el avance
   - Rendici√≥n de cuentas
```

**H) Portal de Transparencia:**

**Informaci√≥n publicada obligatoriamente:**
- Presupuesto municipal completo
- Ejecuci√≥n presupuestaria mensual
- N√≥mina de funcionarios (sin datos sensibles)
- Contrataciones y licitaciones
- √ìrdenes de compra
- Ordenanzas municipales vigentes
- Actas del Concejo Municipal
- Bienes del municipio
- Plan Operativo Anual
- Estados financieros auditados
- Declaraciones juradas de funcionarios

**I) Consultas P√∫blicas y Encuestas:**
- Alcald√≠a puede lanzar consultas sobre temas importantes
- Encuestas de satisfacci√≥n de servicios
- Foros de discusi√≥n moderados
- Buz√≥n de sugerencias

**J) Rendici√≥n de Cuentas:**
- Informes trimestrales del alcalde
- Eventos de rendici√≥n p√∫blica (transmisi√≥n online)
- Respuestas a preguntas frecuentes
- Compromisos vs cumplimiento

---

## üöó **6. M√ìDULO DE GESTI√ìN DE FLOTA**

### **¬øQu√© hace este m√≥dulo?**
Controla todos los veh√≠culos municipales para que est√©n operativos, se les d√© mantenimiento oportuno y se optimice su uso.

### **Funcionalidades Detalladas:**

**A) Inventario Maestro de Veh√≠culos:**

**Datos de cada veh√≠culo:**
- Tipo: cami√≥n recolector, ambulancia, patrulla, camioneta, autom√≥vil, volqueta, autob√∫s, motocicleta, maquinaria pesada
- Marca y modelo
- A√±o de fabricaci√≥n
- Placa
- N√∫mero de serial de carrocer√≠a y motor
- Color
- Capacidad (pasajeros o carga)
- Tipo de combustible: gasolina, di√©sel, gas, el√©ctrico
- Cilindraje
- Foto del veh√≠culo
- Estado: operativo, en reparaci√≥n, fuera de servicio, siniestrado
- Dependencia asignada: Aseo Urbano, Salud, Seguridad, Alcald√≠a, etc.
- Valor de adquisici√≥n
- Valor actual (depreciaci√≥n)

**Documentaci√≥n:**
- Certificado de registro
- P√≥liza de seguro (fecha vencimiento, cobertura)
- T√≠tulo de propiedad
- Permisos especiales (si aplica)
- Revisiones t√©cnicas obligatorias

**B) Asignaci√≥n de Veh√≠culos:**
- Asignaci√≥n permanente: veh√≠culo asignado a un funcionario o dependencia espec√≠fica
- Asignaci√≥n temporal: pool de veh√≠culos disponibles para solicitud
- Control de conductores autorizados (con licencia al d√≠a)
- Hist√≥rico de asignaciones

**C) Bit√°cora de Viaje:**

**Cada vez que se usa un veh√≠culo se registra:**
- Fecha y hora de salida
- Conductor responsable
- Kilometraje inicial
- Destino y motivo del viaje
- Hora de retorno
- Kilometraje final
- Kil√≥metros recorridos (autom√°tico)
- Observaciones: estado del veh√≠culo, incidencias
- Firma digital del conductor

**Beneficios:**
- Control de uso real vs reportado
- Detecta uso personal indebido
- Calcula rendimiento de combustible real
- Identifica patrones de uso

**D) Control de Combustible:**

**Sistema de vales:**
- Emisi√≥n de vales de combustible
- Datos del vale: veh√≠culo, litros autorizados, estaci√≥n de servicio, fecha
- Control de cupo mensual por veh√≠culo
- Registro de carga efectiva:
  - Fecha y hora real de llenado
  - Litros cargados
  - Costo (si es pagado)
  - Kilometraje al momento de carga

**An√°lisis:**
- Rendimiento km/litro por veh√≠culo
- Comparaci√≥n con rendimiento esperado del fabricante
- Alertas de bajo rendimiento (posible fuga, mal estado)
- Consumo mensual por veh√≠culo y por flota total
- Proyecci√≥n de gasto en combustible
- Estad√≠sticas por tipo de veh√≠culo

**E) Mantenimiento Preventivo:**

**Sistema automatizado:**
- Se programa mantenimiento seg√∫n:
  - Kilometraje (cada 5,000 km, 10,000 km, etc.)
  - Tiempo (cada 3 meses, 6 meses, 1 a√±o)
  - Lo que ocurra primero

**Alertas autom√°ticas:**
- 1,000 km antes: alerta amarilla
- En el momento: alerta roja
- Vencido: veh√≠culo bloqueado hasta realizar mantenimiento

**Checklist de mantenimiento:**
- Cambio de aceite motor
- Cambio de filtros (aire, aceite, combustible)
- Rotaci√≥n de neum√°ticos
- Alineaci√≥n y balanceo
- Revisi√≥n de frenos (pastillas, discos, l√≠quido)
- Revisi√≥n de suspensi√≥n
- Cambio de buj√≠as
- Revisi√≥n de sistema el√©ctrico
- Revisi√≥n de luces
- Cambio de correas
- Limpieza de inyectores
- Revisi√≥n de aire acondicionado

**Registro de servicio:**
- Fecha de mantenimiento
- Taller (interno o externo)
- Trabajos realizados
- Repuestos utilizados
- Costo total
- Mec√°nico responsable
- Pr√≥ximo mantenimiento programado autom√°tico

**F) Mantenimiento Correctivo (Reparaciones):**

**Cuando hay una falla:**
```
1. Reporte de falla:
   - Conductor o responsable reporta problema
   - Describe s√≠ntoma
   - Veh√≠culo pasa a estado "en reparaci√≥n"

2. Diagn√≥stico:
   - Mec√°nico eval√∫a
   - Identifica causa
   - Elabora presupuesto

3. Aprobaci√≥n:
   - Si costo < umbral: autoriza supervisor
   - Si costo > umbral: requiere direcci√≥n
   - Si muy costoso: evaluar dar de baja

4. Reparaci√≥n:
   - Se ejecuta trabajo
   - Se registran repuestos usados
   - Pruebas de funcionamiento

5. Entrega:
   - Se devuelve operativo
   - Actualiza estado del veh√≠culo
   - Registra costo total
```

**Historial de reparaciones:**
- Todas las fallas que ha tenido el veh√≠culo
- Identifica veh√≠culos "problema" (alto costo de mantenimiento)
- Decisi√≥n de dar de baja por ineficiencia

**G) Gesti√≥n de Neum√°ticos:**
- Inventario de neum√°ticos instalados en cada veh√≠culo
- Control de posici√≥n (delantero izq/der, trasero izq/der)
- Marca, medida, fecha de instalaci√≥n
- Programa de rotaci√≥n
- Control de presi√≥n de aire
- Registro de cambios
- Vida √∫til esperada vs real
- Almac√©n de neum√°ticos de repuesto

**H) Control de Repuestos:**
- Inventario de repuestos en almac√©n
- Repuestos cr√≠ticos con stock m√≠nimo
- Solicitudes de compra autom√°ticas
- Asociaci√≥n de repuesto usado a veh√≠culo espec√≠fico
- Control de garant√≠as de repuestos
- Proveedores habituales

**I) Seguros:**
- P√≥liza de cada veh√≠culo
- Cobertura contratada
- Prima pagada
- Fecha de vencimiento (alertas autom√°ticas)
- Registro de siniestros/accidentes:
  - Fecha, hora, lugar
  - Descripci√≥n del incidente
  - Conductor involucrado
  - Da√±os materiales/personales
  - Proceso con seguradora
  - Costos cubiertos/no cubiertos
- Historial de siniestralidad

**J) Costos Operativos:**

**Indicadores por veh√≠culo:**
- Costo de combustible mensual/anual
- Costo de mantenimiento preventivo acumulado
- Costo de reparaciones acumuladas
- Costo de seguro anual
- Costo de impuestos municipales
- Depreciaci√≥n
- **Costo total de propiedad (TCO)**
- Costo por kil√≥metro recorrido

**An√°lisis de Flota:**
- Ranking de veh√≠culos m√°s costosos
- Comparaci√≥n entre unidades similares
- Punto √≥ptimo de reemplazo (cuando comprar nuevo es m√°s barato que reparar)
- Presupuesto anual requerido para la flota

**K) GPS y Telemetr√≠a (opcional pero recomendado):**
- Rastreo en tiempo real de veh√≠culos
- Hist√≥rico de rutas
- Geocercas (alertas si sale de zona autorizada)
- Detecci√≥n de ralent√≠ excesivo
- Velocidad en tiempo real
- Alertas de exceso de velocidad
- Comportamiento del conductor (frenadas bruscas, aceleraciones)
- Optimizaci√≥n de rutas

**L) Reportes Gerenciales:**
- Estado general de la flota
- Veh√≠culos operativos vs no operativos
- Mantenimientos vencidos
- Seguros por vencer
- Consumo de combustible
- Veh√≠culos con mayor costo operativo
- Necesidades de renovaci√≥n de flota

---

## üì¶ **7. M√ìDULO DE INVENTARIO Y BIENES MUNICIPALES**

### **¬øQu√© hace este m√≥dulo?**
Registra y controla todos los bienes que son propiedad del municipio, desde edificios hasta computadoras, para evitar p√©rdidas y optimizar su uso.

### **Funcionalidades Detalladas:**

**A) Clasificaci√≥n de Bienes:**

**1. Bienes Inmuebles:**
- Edificios: sedes administrativas, ambulatorios, escuelas municipales, bibliotecas
- Terrenos: lotes, parcelas
- Infraestructura: plazas, parques, mercados municipales, polideportivos
- Datos: ubicaci√≥n, √°rea, linderos, documento de propiedad, aval√∫o, uso actual

**2. Bienes Muebles:**
- Mobiliario: escritorios, sillas, archivadores, estantes
- Equipos de oficina: computadoras, impresoras, fotocopiadoras, tel√©fonos, proyectores
- Aires acondicionados
- Electrodom√©sticos: neveras, microondas (para comedores)
- Herramientas: taladros, soldadoras, compresores
- Instrumental m√©dico: tensi√≥metros, camillas, estetoscopios
- Equipos deportivos
- Instrumentos musicales
- Obras de arte, cuadros hist√≥ricos
- Otros

**3. Maquinaria y Equipos Especiales:**
- Retroexcavadoras, cargadores, motoniveladoras
- Plantas el√©ctricas
- Bombas de agua
- Equipos de sonido profesionales
- Equipos de fumigaci√≥n

**4. Bienes Intangibles:**
- Software con licencias
- Dominios web
- Patentes o marcas del municipio

**B) Registro Detallado de Cada Bien:**

**Informaci√≥n b√°sica:**
- C√≥digo √∫nico del bien (etiqueta, c√≥digo de barras, QR)
- Descripci√≥n completa
- Marca y modelo (si aplica)
- N√∫mero de serial
- A√±o de adquisici√≥n
- Valor de compra original
- Valor actual (con depreciaci√≥n)
- Estado: excelente, bueno, regular, malo, obsoleto, inservible
- Proveedor original

**Ubicaci√≥n y custodia:**
- Dependencia/oficina asignada
- Ubicaci√≥n f√≠sica espec√≠fica (edificio, piso, oficina)
- Custodio responsable (funcionario asignado)
- Fecha de asignaci√≥n
- Hist√≥rico de movimientos

**Documentaci√≥n:**
- Factura de compra (digitalizada)
- Garant√≠a (si est√° vigente)
- Manuales de usuario
- Certificados (si aplica)
- P√≥liza de seguro (si aplica)

**Fotograf√≠as:**
- Foto del bien
- Foto de la placa o serial
- Foto del estado actual

**C) Control de Depreciaci√≥n:**
- M√©todo de depreciaci√≥n seg√∫n normativa (l√≠nea recta generalmente)
- Vida √∫til estimada por tipo de bien
- C√°lculo autom√°tico de depreciaci√≥n mensual/anual
- Valor en libros actualizado
- Reportes contables para balance general

**D) Movimientos de Bienes:**

**Tipos de movimientos:**

**1. Asignaci√≥n inicial:**
- Se entrega bien nuevo al custodio
- Acta de entrega firmada digitalmente
- Custodio acepta responsabilidad

**2. Traspaso interno:**
- Bien se mueve de una dependencia a otra
- Acta de entrega-recepci√≥n
- Custodio anterior descarga responsabilidad
- Nuevo custodio acepta

**3. Pr√©stamo temporal:**
- Para eventos, actividades especiales
- Fecha de salida y retorno planificado
- Responsable temporal
- Verificaci√≥n al retorno

**4. Reparaci√≥n/Mantenimiento:**
- Salida a taller externo
- Registro de taller
- Costo de reparaci√≥n
- Fecha de retorno

**5. Baja o desincorporaci√≥n:**
- Bienes inservibles, obsoletos o perdidos
- Raz√≥n de baja: obsolescencia, hurto, extrav√≠o, deterioro irreparable
- Requiere autorizaci√≥n jer√°rquica
- Proceso seg√∫n LOAFSP
- Acta de baja
- Salida del inventario

**6. Donaci√≥n o remate:**
- Bienes en buen estado pero no necesarios
- Donaci√≥n a instituciones educativas, comunales
- Remate p√∫blico de bienes depreciados
- Acta de transferencia

**E) Inventario de Almac√©n (Bienes Fungibles):**

**Materiales y suministros:**
- √ötiles de oficina: resmas de papel, carpetas, grapadoras, bol√≠grafos, toner
- Materiales de limpieza: cloro, desinfectantes, escobas, bolsas de basura
- Materiales de construcci√≥n: cemento, arena, bloques, pintura, electricidad, plomer√≠a
- Medicamentos (para ambulatorios municipales)
- Alimentos no perecederos (para programas sociales)
- Uniformes
- Repuestos varios

**Control de inventario:**
- Cantidad en stock actual
- Unidad de medida
- Ubicaci√≥n en almac√©n (estante, pasillo)
- Stock m√≠nimo (punto de reorden)
- Stock m√°ximo
- Costo unitario promedio
- Valor total del inventario
- Proveedor habitual

**Entradas:**
- Recepci√≥n de compras
- Verificaci√≥n contra orden de compra
- Conteo f√≠sico
- Registro en sistema
- Actualizaci√≥n de stock

**Salidas:**
- Solicitud de dependencias (requisiciones)
- Autorizaci√≥n de almac√©n
- Entrega con comprobante firmado
- Descuento de inventario
- Registro de uso por departamento

**Reportes de consumo:**
- Consumo mensual por art√≠culo
- Consumo por dependencia
- Proyecci√≥n de necesidades
- Rotaci√≥n de inventario
- Art√≠culos de lento movimiento

**F) Solicitudes de Compra:**

**Proceso:**
```
1. Dependencia identifica necesidad
2. Elabora solicitud en el sistema:
   - Art√≠culos requeridos
   - Cantidad
   - Justificaci√≥n
   - Urgencia
3. Supervisor de √°rea aprueba
4. Pasa a Direcci√≥n de Administraci√≥n
5. Verifica disponibilidad presupuestaria
6. Almac√©n verifica si hay en stock
   - Si hay: se entrega de inmediato
   - Si no hay: pasa a compras
7. Compras cotiza con proveedores
8. Autorizaci√≥n final seg√∫n monto
9. Emisi√≥n de orden de compra
10. Recepci√≥n y entrega a solicitante
```

**G) Inventario F√≠sico Peri√≥dico:**

**Levantamiento anual o bianual:**
- Se conforma comisi√≥n de inventario
- Planificaci√≥n por dependencias
- Visitas f√≠sicas a cada oficina
- Verificaci√≥n de existencia de bienes registrados
- Conteo de cantidades (almac√©n)
- Verificaci√≥n de estado
- Levantamiento de nuevos bienes no registrados (compras no cargadas)
- Identificaci√≥n de faltantes

**Conciliaci√≥n:**
- Comparaci√≥n inventario f√≠sico vs sistema
- Investigaci√≥n de diferencias
- Ajustes contables
- Responsabilidades por p√©rdidas
- Actualizaci√≥n del sistema

**H) Sistema de Etiquetado:**
- Cada bien tiene c√≥digo √∫nico: ALM-2025-001234
- Etiqueta f√≠sica adhesiva con c√≥digo de barras o QR
- Esc√°ner para inventarios r√°pidos
- App m√≥vil para escanear y verificar
- Vinculaci√≥n autom√°tica del c√≥digo al bien en el sistema

**I) Mantenimiento de Bienes:**
- Programa de mantenimiento preventivo:
  - Aires acondicionados: limpieza trimestral
  - Computadoras: mantenimiento semestral
  - Equipos m√©dicos: calibraci√≥n anual
  - Mobiliario: revisi√≥n y reparaciones menores
- Registro de servicios
- Garant√≠as vigentes
- Costos de mantenimiento acumulados

**J) Seguros de Bienes:**
- P√≥liza de seguros contra incendio, robo, desastres
- Cobertura por tipo de bien
- Valor asegurado vs valor real
- Renovaci√≥n de p√≥lizas
- Registro de siniestros y reclamos

**K) Reportes y Consultas:**
- Inventario completo o por dependencia
- Bienes asignados a un funcionario espec√≠fico
- Bienes por custodio
- Valor total del patrimonio municipal
- Bienes depreciados pendientes de baja
- Movimientos en un per√≠odo
- Bienes en reparaci√≥n
- Nivel de stock de almac√©n
- Necesidades de reposici√≥n

**L) Control de Garant√≠as:**
- Alertas de vencimiento de garant√≠as
- Activaci√≥n de garant√≠a cuando hay falla
- Seguimiento de reparaciones en garant√≠a
- Hist√≥rico de uso de garant√≠as

---

## üë∑ **8. M√ìDULO DE RECURSOS HUMANOS**

### **¬øQu√© hace este m√≥dulo?**
Administra todo lo relacionado con los empleados municipales: desde su contrataci√≥n hasta el pago de n√≥mina, vacaciones, evaluaciones y retiro.

### **Funcionalidades Detalladas:**

**A) Expediente Digital del Funcionario:**

**Datos Personales:**
- Nombre completo
- C√©dula de identidad
- RIF
- Fecha y lugar de nacimiento
- Edad actual
- Sexo
- Estado civil
- Direcci√≥n completa
- Tel√©fonos (personal, emergencia)
- Correo electr√≥nico personal y corporativo
- Grupo sangu√≠neo
- Contacto de emergencia
- Foto tipo carnet

**Datos Acad√©micos:**
- Nivel educativo: primaria, bachiller, TSU, universitario, postgrado, doctorado
- T√≠tulo obtenido
- Instituci√≥n educativa
- A√±o de graduaci√≥n
- Documentos: copias de t√≠tulos digitalizados
- Cursos y certificaciones adicionales

**Datos Laborales:**
- N√∫mero de empleado
- Fecha de ingreso al municipio
- Cargo actual
- Dependencia/direcci√≥n asignada
- Tipo de personal: empleado, obrero, contratado, alto nivel
- Tipo de contrato: fijo, contratado, pasante, eventual
- Salario base actual
- Clasificaci√≥n seg√∫n tabulador
- Jefe inmediato
- Hist√≥rico de cargos en el municipio

**Documentaci√≥n Legal:**
- Copia de c√©dula
- RIF
- Certificado de antecedentes penales
- Examen m√©dico pre-empleo
- Carta de postulaci√≥n
- Curriculum vitae
- Constancias de trabajo anteriores
- Referencias personales y laborales
- Contrato firmado (digitalizado)
- Actas de amonestaciones (si aplica)
- Cartas de felicitaci√≥n/reconocimientos

**B) Gesti√≥n de N√≥mina:**

**Conceptos del recibo de pago:**

**Asignaciones (ingresos):**
- Sueldo base
- Prima por antig√ºedad (seg√∫n a√±os de servicio)
- Prima por profesionalizaci√≥n
- Prima por hijos
- Bono de alimentaci√≥n (Cesta Ticket)
- Bonos especiales (Aguinaldos, bonificaciones)
- Horas extras (si aplica)
- Guardias nocturnas/fines de semana (si aplica)
- Suplencias
- Retroactivos (si aplica)
- Otros bonos seg√∫n convenci√≥n colectiva

**Deducciones:**
- IVSS (Seguro Social): porcentaje legal
- Ley de Pol√≠tica Habitacional (FAOV): 1%
- Paro Forzoso: 0.5%
- Impuesto Sobre la Renta (ISLR): si aplica
- Caja de Ahorro: aportes voluntarios
- Pr√©stamos: cuotas de pr√©stamos otorgados
- Embargos judiciales (si aplica)
- Anticipo de quincena
- Otras deducciones autorizadas

**Aportes Patronales (carga del municipio):**
- IVSS patronal
- FAOV patronal
- Paro Forzoso patronal
- INCES (si aplica)
- Bono de Alimentaci√≥n

**Proceso de n√≥mina:**
```
1. Cierre de novedades:
   - Ingresos de nuevos empleados
   - Egresos (renuncias, despidos, jubilaciones)
   - Cambios de sueldo (aumentos, ascensos)
   - Suspensiones o reposos m√©dicos
   - Vacaciones
   - Permisos no remunerados

2. Carga de asistencias:
   - Integraci√≥n con sistema biom√©trico
   - Verificaci√≥n de faltas injustificadas
   - Registro de retardos
   - Horas extras aprobadas

3. C√°lculo autom√°tico:
   - Sistema procesa asignaciones y deducciones
   - C√°lculo de aportes y retenciones
   - Generaci√≥n de conceptos especiales

4. Revisi√≥n y ajustes:
   - Supervisor RH revisa casos especiales
   - Correcciones de errores

5. Aprobaci√≥n:
   - Director de RH aprueba n√≥mina
   - Director de Finanzas verifica disponibilidad

6. Generaci√≥n de archivos:
   - Archivo TXT para bancos (dispersi√≥n bancaria)
   - Relaci√≥n de pagos por dependencia
   - Recibos de pago individuales

7. Pago:
   - Transferencia a cuentas bancarias (d√≠a de pago)
   - Disponibilidad inmediata para funcionarios

8. Reportes post-pago:
   - Resumen de n√≥mina procesada
   - Provisiones de prestaciones sociales
   - Aportes IVSS a declarar
```

**Recibo de pago digital:**
- Descargable por el empleado desde portal interno
- PDF firmado digitalmente
- Hist√≥rico de todos los recibos
- Certificaciones de ingresos para tr√°mites

**C) Control de Asistencia:**

**Sistema Biom√©trico Integrado:**
- Relojes checadores con huella dactilar o facial
- Ubicados en edificios municipales
- Registro de entrada y salida real

**Marcaciones:**
- Hora de entrada
- Salida a almuerzo (si aplica)
- Regreso de almuerzo
- Hora de salida
- Registro de fecha y hora exacta

**Control de horarios:**
- Horario asignado por cargo
- Ejemplos: 7:00am-3:00pm, 8:00am-4:00pm, turnos rotativos
- C√°lculo autom√°tico de retardos (tolerancia de 5-10 min configurable)
- Faltas injustificadas
- Salidas tempranas no autorizadas

**Justificaciones:**
- Empleado puede subir justificativos (reposos m√©dicos, permisos)
- Supervisor aprueba o rechaza
- Se actualiza estado de asistencia

**Reportes de asistencia:**
- Por empleado: d√≠as trabajados, faltas, retardos
- Por dependencia: consolidado de asistencia
- Exportable para c√°lculo de descuentos en n√≥mina
- Hist√≥rico mensual y anual

**D) Gesti√≥n de Vacaciones:**

**Derecho a vacaciones:**
- D√≠as acumulados seg√∫n antig√ºedad (Ley del Trabajo):
  - 1 a√±o: 15 d√≠as h√°biles
  - 2 a√±os: 16 d√≠as
  - Incremento progresivo hasta 25 d√≠as
- Bonificaci√≥n por vacaciones (bono vacacional)
- C√°lculo de d√≠as disponibles, disfrutados y pendientes

**Solicitud de vacaciones:**
```
1. Empleado:
   - Ingresa al portal
   - Ve sus d√≠as disponibles
   - Selecciona fechas deseadas (inicio y fin)
   - Env√≠a solicitud

2. Supervisor:
   - Recibe notificaci√≥n
   - Eval√∫a disponibilidad operativa
   - Aprueba o rechaza (con justificaci√≥n)
   - Puede sugerir fechas alternativas

3. Recursos Humanos:
   - Registra oficialmente las vacaciones
   - Descuenta del saldo del empleado
   - Programa el pago del bono vacacional

4. Sistema:
   - Marca esos d√≠as como "vacaciones" en asistencia
   - No cuenta como falta
   - Genera calendario de ausencias
```

**Plan de vacaciones:**
- Programaci√≥n anual anticipada
- Evita que toda un √°rea se vaya al mismo tiempo
- Balance operativo

**E) Permisos y Licencias:**

**Tipos de permisos:**
- Permiso remunerado (con goce de sueldo):
  - M√©dico (citas, consultas)
  - Por matrimonio (d√≠as seg√∫n ley)
  - Nacimiento de hijo
  - Fallecimiento de familiar
  - Tr√°mites personales (con l√≠mite mensual)
  - Estudio (si aplica)

- Permiso no remunerado:
  - Asuntos personales sin justificaci√≥n m√©dica/legal
  - D√≠as sin goce de sueldo

**Reposos m√©dicos:**
- Reposo IVSS (pagado por seguro social)
- Reposo privado (los primeros d√≠as pagados por alcald√≠a)
- Carga de constancia m√©dica digitalizada
- Verificaci√≥n por m√©dico ocupacional (casos prolongados)
- Integraci√≥n con n√≥mina para descuentos/pagos

**Licencias especiales:**
- Maternidad: pre y post natal (semanas seg√∫n ley)
- Paternidad: d√≠as por nacimiento
- Licencia por estudio: postgrados, maestr√≠as
- Comisi√≥n de servicio: representaci√≥n oficial del municipio

**F) Evaluaci√≥n de Desempe√±o:**

**Proceso anual o semestral:**
```
1. Planificaci√≥n:
   - Se definen objetivos individuales al inicio del per√≠odo
   - Alineados con objetivos de la dependencia
   - Indicadores medibles (SMART)

2. Seguimiento:
   - Reuniones intermedias supervisor-empleado
   - Ajustes de objetivos si es necesario

3. Evaluaci√≥n:
   - Supervisor eval√∫a al empleado
   - Dimensiones:
     * Cumplimiento de objetivos (50%)
     * Competencias (conocimientos, habilidades)
     * Actitud y valores (compromiso, trabajo en equipo, √©tica)
     * Disciplina y asistencia
   - Escala: Deficiente (1), Regular (2), Bueno (3), Muy Bueno (4), Excelente (5)

4. Retroalimentaci√≥n:
   - Reuni√≥n cara a cara
   - Supervisor comunica resultados
   - Empleado puede hacer comentarios
   - Plan de mejora si es necesario

5. Consolidaci√≥n:
   - Calificaci√≥n final promedio
   - Ranking de empleados
   - Decisiones:
     * Reconocimientos para mejores
     * Plan de desarrollo para mejorables
     * Acciones correctivas para deficientes
```

**Consecuencias:**
- Ascensos y promociones
- Aumentos de sueldo por m√©rito
- Bonificaciones especiales
- Capacitaciones espec√≠ficas
- Amonestaciones (casos negativos recurrentes)

**G) Capacitaci√≥n y Desarrollo:**

**Plan anual de capacitaci√≥n:**
- Detecci√≥n de necesidades (seg√∫n evaluaci√≥n de desempe√±o)
- Cursos internos: facilitador municipal o invitado
- Cursos externos: instituciones especializadas
- Temas: t√©cnicos, gerenciales, software, atenci√≥n al p√∫blico, etc.

**Registro de capacitaciones:**
- Nombre del curso/taller
- Instituci√≥n
- Duraci√≥n (horas)
- Fecha de realizaci√≥n
- Certificado digitalizado
- Evaluaci√≥n del curso por participante
- Aplicabilidad al cargo

**Banco de conocimientos:**
- Matriz de competencias por empleado
- Identifica expertos internos
- Sucesi√≥n de cargos cr√≠ticos

**H) Prestaciones Sociales:**

**C√°lculo seg√∫n ley venezolana:**
- Antig√ºedad: 5 d√≠as de salario por mes trabajado (a√±o 1), luego 2 d√≠as/mes adicionales
- Intereses sobre prestaciones: tasa seg√∫n ley (capitalizable)
- Aprovisionamiento mensual autom√°tico
- Anticipos de prestaciones (hasta 75% acumulado):
  - Para vivienda
  - Para situaciones especiales
- Liquidaci√≥n total al egreso (renuncia, despido, jubilaci√≥n)

**Fideicomiso o provisi√≥n:**
- Cuenta individual por empleado
- Actualizaci√≥n mensual
- Certificaci√≥n anual de saldo para el empleado

**I) Caja de Ahorro (Si aplica):**
- Aportes mensuales del empleado (% voluntario)
- Aporte patronal de contraparte
- Pr√©stamos a empleados con inter√©s preferencial:
  - Personales
  - Por emergencia
  - Para veh√≠culo o vivienda
- Reparto de excedentes anual
- Gesti√≥n integral desde el sistema

**J) Beneficios Adicionales:**
- Seguro de HCM (Hospitalizaci√≥n, Cirug√≠a, Maternidad)
- P√≥liza de vida
- Seguro funerario
- Bono de cumplea√±os
- √ötiles escolares para hijos
- Juguetes en navidad
- Cesta navide√±a
- Actividades recreacionales (d√≠a de la familia, aniversario del municipio)

**K) Procesos de Ingreso y Egreso:**

**Ingreso (reclutamiento):**
```
1. Solicitud de personal:
   - Dependencia solicita cubrir vacante
   - Justificaci√≥n y perfil requerido

2. Reclutamiento:
   - Publicaci√≥n de vacante (web, redes sociales)
   - Recepci√≥n de CV
   - Base de datos de postulantes

3. Selecci√≥n:
   - Revisi√≥n de CV
   - Entrevistas
   - Pruebas t√©cnicas/psicom√©tricas
   - Verificaci√≥n de referencias

4. Contrataci√≥n:
   - Oferta formal
   - Recepci√≥n de documentos
   - Examen m√©dico pre-empleo
   - Firma de contrato

5. Inducci√≥n:
   - Bienvenida formal
   - Recorrido por instalaciones
   - Entrega de equipos (computadora, tel√©fono, carnet)
   - Capacitaci√≥n en procesos y sistemas
   - Asignaci√≥n en sistema

6. Alta en n√≥mina:
   - Carga en sistema
   - Apertura cuenta bancaria (si no tiene)
   - Inscripci√≥n IVSS
```

**Egreso:**
```
1. Notificaci√≥n:
   - Renuncia voluntaria (con preaviso)
   - Despido justificado
   - Jubilaci√≥n
   - Fallecimiento

2. Proceso administrativo:
   - Paz y salvo de bienes asignados
   - Entrega de equipos y documentos
   - Cierre de accesos (sistemas, edificios)
   - Finiquito laboral

3. Liquidaci√≥n:
   - C√°lculo de prestaciones sociales
   - Vacaciones no disfrutadas
   - Otros conceptos pendientes
   - Descuentos si aplica
   - Pago de liquidaci√≥n

4. Baja en sistema:
   - Inactivaci√≥n de usuario
   - Archivado de expediente
   - Certificados laborales si los solicita
```

**L) Carrera Administrativa:**
- Seg√∫n Ley del Estatuto de la Funci√≥n P√∫blica
- Ingreso por concurso
- Escalaf√≥n con niveles y grados
- Ascensos por antig√ºedad y m√©rito
- Estabilidad laboral
- Derechos y deberes
- R√©gimen disciplinario

**M) Disciplina y Sanciones:**
- Amonestaciones verbales
- Amonestaciones escritas
- Suspensiones sin goce de sueldo
- Destituci√≥n (casos graves)
- Debido proceso: notificaci√≥n, descargos, decisi√≥n
- Registro en expediente

**N) N√≥minas Especiales:**
- N√≥mina regular (empleados y obreros fijos)
- N√≥mina de contratados (eventuales)
- N√≥mina de jubilados y pensionados
- Honorarios profesionales (servicios independientes)

**O) Organigramas Din√°micos:**
- Estructura organizacional visual
- Por dependencias y sub-dependencias
- Con foto y datos del responsable
- L√≠neas de mando y reportes
- Actualizaci√≥n autom√°tica

**P) Reportes Clave:**
- Listado de personal activo
- N√≥mina por dependencia
- Cumplea√±os del mes
- Antig√ºedad de empleados
- Rotaci√≥n de personal
- Ausentismo
- Costo de personal (presupuesto vs ejecutado)
- Proyecci√≥n de jubilaciones
- Planilla IVSS mensual
- Certificados de trabajo autom√°ticos
- Constancias de ingresos

## üìú **9. M√ìDULO DE GESTI√ìN DOCUMENTAL Y ARCHIVO**

### **¬øQu√© hace este m√≥dulo?**
Controla todo el flujo de documentos que entran y salen de la alcald√≠a, los archiva digitalmente y permite encontrarlos f√°cilmente, eliminando el papel y agilizando los procesos.

### **Funcionalidades Detalladas:**

**A) Correspondencia y Mesa de Entrada:**

**Documentos que ingresan:**
```
1. Recepci√≥n f√≠sica/digital:
   - Ciudadano entrega documento en ventanilla o env√≠a por email
   - Funcionario de mesa de entrada recibe
   - Digitaliza si es f√≠sico (escanea)
   - Fotograf√≠a del sobre si viene en sobre cerrado

2. Registro en sistema:
   - N√∫mero de entrada √∫nico: ME-2025-001234
   - Fecha y hora de recepci√≥n
   - Remitente: nombre, c√©dula, tel√©fono, email
   - Tipo de documento: solicitud, denuncia, recurso, petici√≥n, reclamo
   - Asunto: resumen breve
   - Dependencia destino (a qui√©n va dirigido)
   - N√∫mero de folios
   - Anexos (si tiene)
   - Urgencia: normal, urgente, muy urgente

3. Entrega de comprobante:
   - Ciudadano recibe ticket con n√∫mero de entrada
   - C√≥digo QR para rastreo online
   - Puede consultar estado desde web

4. Distribuci√≥n:
   - Sistema notifica autom√°ticamente a la dependencia
   - Se genera ruta de entrega interna
   - Se entrega f√≠sicamente o digitalmente
   - Acuse de recibo digital del destinatario
```

**Correspondencia que sale:**
```
1. Elaboraci√≥n:
   - Dependencia redacta oficio/carta/comunicaci√≥n
   - En plantilla institucional
   - Con membrete oficial

2. Revisi√≥n y firma:
   - Jefe de dependencia revisa
   - Director firma digitalmente
   - Alcalde firma (si requiere firma m√°xima)

3. Registro de salida:
   - N√∫mero correlativo: MS-2025-000456
   - Destinatario externo
   - Fecha de salida
   - Medio de env√≠o: entrega personal, correo certificado, email, courier
   - Referencia al documento que responde (si aplica)
   - Digitalizaci√≥n del documento firmado

4. Despacho:
   - Se entrega o env√≠a
   - Gu√≠a de env√≠o (si es courier)
   - Acuse de recibo (si aplica)
   - Registro de entrega efectiva
```

**B) Gesti√≥n de Oficios Internos:**

**Comunicaciones entre dependencias:**
- Memorandos
- Oficios internos
- Circulares (comunicaci√≥n masiva)
- Providencias administrativas

**Numeraci√≥n autom√°tica:**
- Por dependencia origen
- Formato: DIR-FINANZAS-2025-045
- Consecutivo anual

**Workflow de aprobaci√≥n:**
- Borrador ‚Üí Revisi√≥n ‚Üí Aprobaci√≥n ‚Üí Firma ‚Üí Distribuci√≥n
- Notificaciones autom√°ticas en cada etapa

**C) Ordenanzas Municipales:**

**Repositorio legislativo completo:**
- Texto √≠ntegro de cada ordenanza
- N√∫mero y fecha de publicaci√≥n
- Tema/materia que regula
- Gaceta municipal donde se public√≥
- Estado: vigente, derogada, reformada
- Hist√≥rico de reformas
- Concordancias con otras ordenanzas
- Reglamentos derivados

**B√∫squeda inteligente:**
- Por n√∫mero de ordenanza
- Por palabra clave en el texto
- Por materia (urbanismo, tributos, ambiente, etc.)
- Por fecha de aprobaci√≥n
- Por Concejo que la aprob√≥

**Publicaci√≥n:**
- Disponible en portal web p√∫blico
- Descarga en PDF
- Consulta gratuita

**D) Actas del Concejo Municipal:**

**Registro de sesiones:**
- Acta de cada sesi√≥n ordinaria y extraordinaria
- Fecha y hora
- Concejales presentes y ausentes
- Orden del d√≠a
- Puntos tratados
- Mociones presentadas
- Votaciones: a favor, en contra, abstenciones
- Acuerdos y resoluciones tomadas
- Transcripci√≥n de intervenciones importantes
- Digitalizaci√≥n del acta firmada

**Consulta p√∫blica:**
- Transparencia total
- Acceso web con buscador
- Hist√≥rico desde a√±os anteriores

**E) Archivo Digital Central:**

**Digitalizaci√≥n masiva:**
- Escaneado de documentos hist√≥ricos en papel
- Organizaci√≥n por a√±o, dependencia, tipo
- Metadatos: fecha, autor, tema, c√≥digo
- OCR (reconocimiento de texto) para b√∫squeda
- Preservaci√≥n digital a largo plazo

**Estructura de archivo:**
```
Archivo Municipal/
‚îú‚îÄ‚îÄ Correspondencia/
‚îÇ   ‚îú‚îÄ‚îÄ Entrada/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2023/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ 2024/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ 2025/
‚îÇ   ‚îî‚îÄ‚îÄ Salida/
‚îú‚îÄ‚îÄ Contratos/
‚îÇ   ‚îú‚îÄ‚îÄ Obras P√∫blicas/
‚îÇ   ‚îú‚îÄ‚îÄ Servicios/
‚îÇ   ‚îî‚îÄ‚îÄ Adquisiciones/
‚îú‚îÄ‚îÄ Actas/
‚îÇ   ‚îú‚îÄ‚îÄ Concejo Municipal/
‚îÇ   ‚îú‚îÄ‚îÄ C√°mara Municipal/
‚îÇ   ‚îî‚îÄ‚îÄ Comisiones/
‚îú‚îÄ‚îÄ Ordenanzas/
‚îú‚îÄ‚îÄ Resoluciones/
‚îú‚îÄ‚îÄ Expedientes Administrativos/
‚îú‚îÄ‚îÄ Recursos Humanos/
‚îÇ   ‚îú‚îÄ‚îÄ Expedientes de Personal/
‚îÇ   ‚îî‚îÄ‚îÄ N√≥minas Hist√≥ricas/
‚îî‚îÄ‚îÄ Otros/
```

**F) Gesti√≥n de Expedientes:**

**Expediente = conjunto de documentos sobre un asunto:**
- N√∫mero de expediente √∫nico
- Car√°tula con datos b√°sicos
- Fecha de apertura
- Interesado/solicitante
- Asunto
- Dependencia responsable
- Estado: en tr√°mite, paralizado, resuelto, archivado
- √çndice de documentos que contiene
- Documentos digitalizados en orden cronol√≥gico
- Anotaciones del tramitador
- Fecha de cierre

**Tipos de expedientes:**
- Permisos de construcci√≥n
- Licitaciones
- Reclamos administrativos
- Expropiaciones
- Solicitudes de servicios
- Investigaciones administrativas
- Recursos jer√°rquicos

**Trazabilidad completa:**
- Hist√≥rico de movimientos del expediente
- Por d√≥nde ha pasado
- Qui√©n lo ha tenido
- Cu√°nto tiempo en cada estaci√≥n
- Acciones realizadas
- Pr√≥ximo paso requerido

**G) Firma Electr√≥nica/Digital:**

**Cumplimiento Ley de Mensajes de Datos:**
- Certificados digitales para funcionarios autorizados
- Firma con validez legal
- Integridad del documento (no modificable despu√©s de firmado)
- No repudio (no se puede negar la firma)
- Timestamping (fecha y hora certificada)

**Proceso de firma:**
- Documento listo para firma
- Notificaci√≥n al firmante
- Firmante revisa en sistema
- Firma con certificado digital o token
- Documento queda firmado y sellado
- Se genera hash criptogr√°fico
- Verificaci√≥n disponible online

**M√∫ltiples firmas:**
- Circuito de firmas secuenciales
- Firma conjunta (varios al mismo tiempo)
- Orden jer√°rquico autom√°tico

**H) Workflow de Aprobaciones:**

**Configuraci√≥n de procesos:**
- Se define flujo por tipo de documento
- Ejemplo: Orden de Pago
  ```
  Solicitante ‚Üí Supervisor √Årea ‚Üí Director Administrativo ‚Üí 
  Director Finanzas ‚Üí Alcalde (si >umbral) ‚Üí Tesorer√≠a
  ```

**Funcionamiento:**
```
1. Iniciador crea documento/solicitud
2. Sistema enruta autom√°ticamente al siguiente en el flujo
3. Cada aprobador recibe notificaci√≥n
4. Puede: Aprobar, Rechazar (con motivo), Solicitar correcciones, Delegar
5. Si aprueba, pasa al siguiente autom√°ticamente
6. Si rechaza, vuelve al iniciador
7. Registro de toda la trazabilidad
8. Tiempo transcurrido en cada estaci√≥n
9. Alertas de documentos estancados
```

**Beneficios:**
- Elimina perseguir firmas f√≠sicas
- Transparencia del proceso
- Velocidad de aprobaci√≥n
- M√©tricas de eficiencia

**I) B√∫squeda y Consultas:**

**Motor de b√∫squeda robusto:**
- B√∫squeda por texto completo (dentro del contenido de documentos PDF)
- Por n√∫mero de documento
- Por remitente/destinatario
- Por fecha o rango de fechas
- Por tipo de documento
- Por dependencia
- Por estado
- Por palabras clave
- B√∫squeda avanzada con operadores booleanos (AND, OR, NOT)

**Resultados:**
- Listado ordenado por relevancia
- Vista previa del documento
- Descarga directa
- Compartir enlace
- Hist√≥rico de consultas

**J) Control de Versiones:**
- Documentos que se modifican mantienen versiones anteriores
- Versi√≥n 1, Versi√≥n 2, etc.
- Comparaci√≥n entre versiones
- Restauraci√≥n de versi√≥n anterior si es necesario
- Hist√≥rico de qui√©n modific√≥ y cu√°ndo

**K) Gesti√≥n de Plantillas:**

**Documentos tipo:**
- Oficios est√°ndar
- Contratos modelo
- Resoluciones tipo
- Certificaciones
- Constancias
- Notificaciones

**Uso:**
- Selecciona plantilla
- Llena campos variables autom√°ticamente desde base de datos
- Genera documento final listo para firma
- Ahorra tiempo de redacci√≥n

**L) Calendario de Vencimientos:**
- Documentos con fechas cr√≠ticas
- Contratos pr√≥ximos a vencer
- Plazos legales para respuestas
- Permisos que expiran
- Alertas anticipadas (30, 15, 7 d√≠as antes)
- Notificaciones a responsables

**M) Estad√≠sticas del √Årea:**
- Documentos ingresados por per√≠odo
- Documentos despachados
- Tiempo promedio de respuesta
- Documentos pendientes
- Rezago documental
- Productividad por funcionario
- Tipos de solicitudes m√°s frecuentes

**N) Seguridad y Accesos:**
- No todos pueden ver todos los documentos
- Permisos por rol
- Documentos confidenciales (restricci√≥n especial)
- Pista de auditor√≠a: qui√©n consult√≥ qu√© y cu√°ndo
- Protecci√≥n contra eliminaci√≥n accidental
- Respaldo autom√°tico diario

**O) Integraci√≥n con Otros M√≥dulos:**
- Documentos de proyectos vinculados al m√≥dulo de proyectos
- Contratos vinculados a compras y presupuesto
- Resoluciones de personal vinculadas a RH
- Permisos de construcci√≥n vinculados a catastro

---

## üè¢ **10. M√ìDULO DE SERVICIOS P√öBLICOS MUNICIPALES**

### **¬øQu√© hace este m√≥dulo?**
Planifica, programa y controla la prestaci√≥n de todos los servicios p√∫blicos que ofrece directamente la alcald√≠a a la comunidad.

### **Funcionalidades Detalladas:**

**A) Aseo Urbano y Gesti√≥n de Desechos:**

**1. Rutas de Recolecci√≥n:**
- Mapa del municipio dividido en sectores de recolecci√≥n
- Rutas definidas con calles espec√≠ficas
- Tipo de recolecci√≥n por ruta:
  - Domiciliaria (casas, edificios)
  - Comercial (negocios, industrias)
  - Hospitalaria (centros de salud)
  - Especial (escombros, podas)

**Programaci√≥n semanal:**
```
Sector A:
- Lunes, Mi√©rcoles, Viernes: Recolecci√≥n domiciliaria
- Martes, Jueves: Comercial
- S√°bado: Especial

Sector B:
- Martes, Jueves, S√°bado: Recolecci√≥n domiciliaria
...
```

**2. Control Operativo Diario:**
- Asignaci√≥n de camiones por ruta
- Asignaci√≥n de cuadrilla (chofer + obreros)
- Hora de salida del dep√≥sito
- Checklist pre-operacional del veh√≠culo
- GPS para seguimiento en tiempo real (opcional)
- Registro de cumplimiento de ruta
- Incidencias: calles bloqueadas, aver√≠as, etc.
- Hora de llegada a relleno sanitario/disposici√≥n final
- Toneladas recolectadas (b√°scula)
- Hora de retorno

**3. Puntos de Recolecci√≥n Especial:**
- Contenedores en puntos estrat√©gicos
- Mercados municipales (recolecci√≥n especial)
- Ferias y eventos especiales
- Control de llenado
- Frecuencia de vaciado

**4. Mantenimiento de Equipos:**
- Camiones compactadores
- Contenedores
- Equipos de protecci√≥n personal de obreros
- Herramientas

**5. Reportes Ciudadanos Integrados:**
- Basura no recogida
- Horarios no cumplidos
- Contenedores da√±ados
- Puntos cr√≠ticos de acumulaci√≥n
- Seguimiento hasta resoluci√≥n

**6. Campa√±as de Limpieza:**
- Jornadas especiales por sectores
- Limpieza de quebradas y canales
- Registro de participantes (voluntarios)
- Material recolectado
- Antes/despu√©s con fotos

**B) Alumbrado P√∫blico:**

**1. Inventario de Luminarias:**
- Ubicaci√≥n exacta (calle, n√∫mero, coordenadas GPS)
- Tipo: LED, sodio, mercurio, fluorescente
- Potencia (watts)
- Altura del poste
- Tipo de poste: concreto, metal, madera
- Estado: funcionando, da√±ado, faltante
- Propietario: municipal, CORPOELEC (si es compartido)
- C√≥digo √∫nico por luminaria
- Foto

**2. Reporte y Atenci√≥n de Fallas:**
```
Ciudadano reporta:
‚Üí "L√°mpara apagada en calle X con Y"
‚Üí Sistema geolocaliza
‚Üí Crea orden de trabajo
‚Üí Asigna a cuadrilla el√©ctrica
‚Üí T√©cnico va, diagnostica:
   - Bombillo fundido ‚Üí cambio inmediato
   - Balasto da√±ado ‚Üí reparaci√≥n
   - Cableado cortado ‚Üí reparaci√≥n mayor
   - Vandalismo ‚Üí reposici√≥n y denuncia
‚Üí Registra reparaci√≥n
‚Üí Actualiza inventario
‚Üí Cierra ticket
‚Üí Notifica al ciudadano
```

**3. Mantenimiento Preventivo:**
- Programa de limpieza de luminarias (2 veces al a√±o)
- Inspecci√≥n de conexiones
- Reemplazo preventivo de componentes
- Poda de √°rboles que obstruyen la luz

**4. Expansi√≥n de Alumbrado:**
- Solicitudes de comunidades para nuevos puntos
- Estudios t√©cnicos de viabilidad
- Proyectos de instalaci√≥n
- Presupuesto requerido

**5. Control de Consumo:**
- Medici√≥n del consumo el√©ctrico (si hay medidores centrales)
- Costos mensuales
- Optimizaci√≥n con LEDs (ahorro energ√©tico)
- Comparativas de consumo

**C) Parques, Plazas y √Åreas Verdes:**

**1. Inventario de Espacios:**
- Nombre del parque/plaza
- Ubicaci√≥n
- √Årea (m¬≤)
- Tipo: parque recreativo, plaza seca, plazoleta, cancha deportiva, parque infantil
- Equipamiento:
  - Juegos infantiles (toboganes, columpios, sube y baja)
  - M√°quinas de ejercicio
  - Canchas (b√°squet, f√∫tbol, multi-uso)
  - Kioscos/p√©rgolas
  - Bancas
  - Papeleras
  - Bebederos
  - Iluminaci√≥n
- Estado: excelente, bueno, regular, malo
- Foto actual

**2. Mantenimiento de √Åreas Verdes:**
- Programa de corte de grama (frecuencia seg√∫n √©poca)
- Rutas de cuadrillas de jardiner√≠a
- Riego (en √©poca seca)
- Poda de √°rboles y arbustos
- Control de plagas en vegetaci√≥n
- Sembrado de plantas ornamentales
- Registro de trabajos realizados por parque

**3. Mantenimiento de Infraestructura:**
- Reparaci√≥n de juegos infantiles da√±ados
- Pintura de equipos
- Reparaci√≥n de bancas
- Limpieza de graffiti
- Bacheo de caminer√≠as
- Reparaci√≥n de iluminaci√≥n interna

**4. Programaci√≥n de Eventos:**
- Calendario de uso de espacios
- Permisos para eventos privados/comunales
- Control de horarios
- Requisitos de seguridad y limpieza post-evento

**5. Arborizaci√≥n Urbana:**
- Inventario de √°rboles del municipio
- Ubicaci√≥n, especie, altura, estado de salud
- Programa de siembra de nuevos √°rboles
- Permisos de tala (casos excepcionales justificados)
- Control de √°rboles que representan riesgo (sobre casas, cables)

**D) Cementerios Municipales:**

**1. Registro de Infraestructura:**
- Capacidad total: n√∫mero de nichos, b√≥vedas, criptas, fosas
- Disponibilidad actual
- Sectores del cementerio
- Mapa/plano con ubicaciones

**2. Gesti√≥n de Servicios:**

**Inhumaciones:**
- Registro del difunto: nombre, c√©dula, fecha nacimiento, fecha fallecimiento
- Familiar responsable: datos, contacto
- Certificado de defunci√≥n (digitalizado)
- Asignaci√≥n de nicho/fosa
- Costo del servicio (seg√∫n tarifa municipal)
- Recibo de pago
- Autorizaci√≥n de inhumaci√≥n
- Fecha y hora del sepelio
- Funcionario que atendi√≥

**Exhumaciones:**
- Solicitud del familiar
- Motivos
- Autorizaci√≥n judicial (si aplica)
- Programaci√≥n
- Registro

**Mantenimiento de espacios:**
- Cobro de mantenimiento anual por nicho
- Control de solvencia
- Servicios: limpieza general, jardiner√≠a, vigilancia

**3. Control de Vencimientos:**
- Nichos temporales (5-10 a√±os)
- Notificaci√≥n a familiares para renovaci√≥n o exhumaci√≥n
- Nichos perpetuos

**4. Otros servicios:**
- Venta de nichos anticipada
- Reservas
- Cesiones y traspasos
- Constancias

**E) Mercados Municipales:**

**1. Registro de Puestos:**
- N√∫mero de puesto
- Ubicaci√≥n dentro del mercado
- Tipo: carnicer√≠a, pescader√≠a, verduras, granos, abastos, comidas, otros
- √Årea (m¬≤)
- Comerciante asignado: nombre, c√©dula, contacto
- Contrato o permiso
- Costo mensual de alquiler
- Estado de pago

**2. Control de Pagos:**
- Facturaci√≥n mensual de alquiler
- Control de morosidad
- Notificaciones
- Sanciones (cierre temporal) por falta de pago
- Hist√≥rico de pagos

**3. Inspecciones Sanitarias:**
- Programaci√≥n de inspecciones
- Verificaci√≥n de condiciones higi√©nico-sanitarias
- Manejo de alimentos
- Control de plagas
- Actas de inspecci√≥n
- Sanciones y clausuras (casos graves)
- Seguimiento de mejoras

**4. Mantenimiento del Mercado:**
- Limpieza general diaria
- Recolecci√≥n de desechos s√≥lidos especial
- Mantenimiento de infraestructura
- Ba√±os p√∫blicos
- Estacionamiento
- Iluminaci√≥n
- Seguridad

**5. Asignaci√≥n de Nuevos Puestos:**
- Disponibilidad
- Solicitudes en lista de espera
- Proceso de selecci√≥n
- Contratos

**F) Protecci√≥n Civil y Gesti√≥n de Riesgos:**

**1. Registro de Emergencias:**
- Tipo: incendio, inundaci√≥n, deslizamiento, accidente, colapso estructural, rescate
- Fecha y hora
- Ubicaci√≥n exacta
- Descripci√≥n del evento
- Personas afectadas/lesionadas
- Da√±os materiales
- Unidades despachadas
- Tiempo de respuesta
- Acciones realizadas
- Resoluci√≥n
- Fotos/videos

**2. Recursos y Equipos:**
- Unidades de rescate (ambulancias, carros bomba)
- Equipos: escaleras, mangueras, extintores, camillas, radios
- Personal: bomberos, param√©dicos, rescatistas
- Disponibilidad por turno
- Ubicaci√≥n de estaciones

**3. Programa de Prevenci√≥n:**
- Inspecciones de seguridad en edificaciones
- Permisos para eventos masivos (verificaci√≥n de seguridad)
- Charlas educativas en comunidades y escuelas
- Simulacros de emergencia
- Calendario de actividades

**4. Mapa de Riesgos:**
- Zonas vulnerables a inundaciones
- √Åreas de deslizamiento
- Construcciones en riesgo
- R√≠os y quebradas peligrosas
- Planes de evacuaci√≥n por zona
- Refugios temporales disponibles

**5. Sistema de Alerta Temprana:**
- Monitoreo de lluvias
- Nivel de r√≠os
- Alertas meteorol√≥gicas
- Difusi√≥n de alertas a la poblaci√≥n (SMS, redes, radio)

**G) Polic√≠a Municipal (Tr√°nsito y Seguridad):**

**1. Gesti√≥n de Multas de Tr√°nsito:**
- Registro de infracciones
- Placas de veh√≠culos
- Tipo de falta
- Monto de la multa
- Oficial que levant√≥
- Foto de la infracci√≥n (si aplica)
- Estado: pendiente, pagada, impugnada
- Pago en l√≠nea de multas

**2. Accidentes de Tr√°nsito:**
- Registro de accidentes atendidos
- Ubicaci√≥n
- Veh√≠culos involucrados
- Lesionados
- Levantamiento de croquis
- Acta del accidente

**3. Control de Estacionamientos:**
- Zonas de estacionamiento regulado
- Parqu√≠metros (si existen)
- Multas por mal estacionamiento
- Gr√∫as para remoci√≥n de veh√≠culos

**4. Patrullaje:**
- Rutas de patrullaje
- Registro de novedades por turno
- Sectores cubiertos
- Incidentes atendidos

**5. Estad√≠sticas de Seguridad:**
- Incidentes por tipo
- Zonas m√°s conflictivas
- Tendencias temporales
- Reportes para planificaci√≥n

**H) Control de Plagas:**

**1. Fumigaciones:**
- Sectores programados mensualmente
- Tipo de plaga: mosquitos, roedores, cucarachas
- Productos utilizados
- Cuadrillas asignadas
- Rutas recorridas
- Registro fotogr√°fico

**2. Campa√±as Preventivas:**
- Abatizaci√≥n (control de mosquitos)
- Educaci√≥n sobre criaderos
- Jornadas especiales en √©poca de lluvia
- Distribuci√≥n de larvicidas

**3. Atenci√≥n de Reportes:**
- Denuncias de plagas espec√≠ficas
- Visitas de verificaci√≥n
- Tratamiento focalizado
- Seguimiento

---

## üìä **11. M√ìDULO DE INDICADORES Y DASHBOARD GERENCIAL**

### **¬øQu√© hace este m√≥dulo?**
Presenta la informaci√≥n cr√≠tica del municipio en tiempo real mediante gr√°ficos y tableros visuales para toma de decisiones r√°pidas y basadas en datos.

### **Funcionalidades Detalladas:**

**A) Dashboard Principal del Alcalde:**

**Vista ejecutiva √∫nica con:**

**Panel Financiero:**
- Presupuesto total del a√±o
- Ejecutado a la fecha (monto y %)
- Disponible
- Gr√°fico: ejecutado vs tiempo transcurrido (si va adelante o atrasado)
- Top 5 gastos del mes
- Ingresos del mes vs proyectados
- Situado constitucional recibido vs esperado

**Panel de Proyectos:**
- Total de proyectos en ejecuci√≥n
- Proyectos en riesgo (sem√°foro rojo)
- Inversi√≥n ejecutada
- Proyectos a culminar este mes
- Proyectos culminados en el a√±o
- Mapa con ubicaci√≥n de proyectos activos

**Panel de Servicios:**
- Reportes ciudadanos pendientes
- Tiempo promedio de respuesta √∫ltimos 30 d√≠as
- Satisfacci√≥n ciudadana promedio (estrellas)
- Sectores con m√°s reportes
- Problemas m√°s frecuentes

**Panel de Recursos:**
- Empleados activos totales
- Ausentismo del mes (%)
- Veh√≠culos operativos / total
- Nivel de inventario cr√≠tico (items bajo m√≠nimo)

**Panel Tributario:**
- Recaudaci√≥n del mes vs meta
- Morosidad total (monto)
- Contribuyentes al d√≠a (%)
- Solvencias emitidas

**Alertas Cr√≠ticas:**
- Proyectos atrasados >30 d√≠as
- Presupuesto sobre-ejecutado en alguna partida
- Emergencias activas
- Reportes ciudadanos >15 d√≠as sin atenci√≥n
- Veh√≠culos con mantenimiento vencido
- Contratos pr√≥ximos a vencer

**B) Dashboards por Direcci√≥n:**

**1. Dashboard de Finanzas:**
- Ejecuci√≥n presupuestaria por partida (gr√°fico de barras)
- Compromisos pendientes de pago
- Flujo de caja proyectado 90 d√≠as
- Cuentas por pagar vencidas
- Proveedores con mayor deuda
- Comparativo a√±o actual vs a√±o anterior
- Indicadores:
  - % de ejecuci√≥n presupuestaria
  - D√≠as promedio de pago a proveedores
  - Eficiencia recaudatoria

**2. Dashboard de Obras P√∫blicas:**
- Mapa de proyectos (cada uno con color seg√∫n estado)
- Lista de proyectos con % de avance f√≠sico y financiero
- Inversi√≥n por parroquia/sector
- Proyectos con desviaciones (costo o tiempo)
- Valuaciones pendientes de pago
- Contratistas activos
- Gr√°fico Gantt consolidado
- Indicadores:
  - % promedio de avance de proyectos
  - Inversi√≥n ejecutada / total programada
  - Cumplimiento de cronogramas

**3. Dashboard de Hacienda (Tributos):**
- Recaudaci√≥n diaria, semanal, mensual, anual
- Gr√°fico de tendencia de ingresos
- Desglose por tipo de tributo
- Cartera de morosos por antig√ºedad
- Efectividad de gesti√≥n de cobranza
- Solvencias emitidas
- Nuevos contribuyentes registrados
- Indicadores:
  - Nivel de morosidad (%)
  - Recuperaci√≥n de cartera (Bs)
  - Eficiencia tributaria (recaudado/estimado)

**4. Dashboard de Servicios P√∫blicos:**
- Rutas cumplidas de aseo urbano (%)
- Toneladas recolectadas
- Luminarias reparadas vs reportadas
- Parques con mantenimiento al d√≠a
- Eventos atendidos por Protecci√≥n Civil
- Tiempo promedio de respuesta a emergencias
- Indicadores:
  - Cobertura de servicios (%)
  - Satisfacci√≥n ciudadana
  - Cumplimiento de programaci√≥n

**5. Dashboard de Recursos Humanos:**
- Total empleados por categor√≠a
- Distribuci√≥n por dependencia (gr√°fico de torta)
- Asistencia promedio mensual
- Rotaci√≥n de personal (altas y bajas)
- Capacitaciones realizadas
- Costo de n√≥mina mensual
- Evaluaciones de desempe√±o pendientes
- Indicadores:
  - Tasa de ausentismo
  - Costo de personal / presupuesto
  - % empleados evaluados

**6. Dashboard de Participaci√≥n Ciudadana:**
- Reportes totales por estado
- Mapa de calor con concentraci√≥n de problemas
- Tiempo promedio de resoluci√≥n por tipo
- Ranking de problemas m√°s frecuentes
- Satisfacci√≥n por tipo de problema
- Tendencia de reportes (aumentando/disminuyendo)
- Sectores m√°s participativos
- Indicadores:
  - Tasa de resoluci√≥n (%)
  - NPS (Net Promoter Score) ciudadano
  - Tiempo promedio de respuesta

**C) Indicadores Clave de Desempe√±o (KPIs):**

**Definici√≥n de KPIs estrat√©gicos:**

**Financieros:**
- Ejecuci√≥n presupuestaria = (Ejecutado / Aprobado) * 100
- Nivel de recaudaci√≥n = (Recaudado / Estimado) * 100
- Autonom√≠a financiera = (Ingresos propios / Ingresos totales) * 100
- Eficiencia del gasto = Gasto ejecutado en programas / Gasto administrativo

**Operacionales:**
- Cumplimiento de proyectos = Proyectos culminados a tiempo / Total proyectos
- Tiempo promedio de respuesta ciudadana = Suma d√≠as de resoluci√≥n / Total reportes
- Cobertura de servicios = Poblaci√≥n atendida / Poblaci√≥n total
- Satisfacci√≥n ciudadana = Promedio de calificaciones

**Recursos:**
- Productividad de personal = Servicios prestados / Total empleados
- Disponibilidad de flota = Veh√≠culos operativos / Total veh√≠culos
- Rotaci√≥n de inventario = Consumo anual / Inventario promedio

**Cada KPI incluye:**
- Valor actual
- Meta establecida
- % de cumplimiento
- Tendencia (mejorando/empeorando)
- Responsable
- Frecuencia de medici√≥n
- Sem√°foro: verde (cumple), amarillo (cerca), rojo (no cumple)

**D) Reportes Autom√°ticos Programados:**

**Configuraci√≥n de reportes:**
- Tipo de reporte: financiero, operacional, estad√≠stico
- Frecuencia: diario, semanal, quincenal, mensual, trimestral, anual
- Hora de generaci√≥n autom√°tica
- Destinatarios (emails)
- Formato: PDF, Excel, dashboard interactivo

**Ejemplos:**
- Reporte diario de caja a las 5:00 PM
- Reporte semanal de proyectos todos los lunes
- Reporte mensual de recaudaci√≥n el d√≠a 5 de cada mes
- Reporte trimestral de gesti√≥n al Concejo Municipal

**E) An√°lisis Predictivo y Tendencias:**

**Uso de datos hist√≥ricos:**
- Proyecci√≥n de ingresos tributarios pr√≥ximos meses
- Estimaci√≥n de demanda de servicios
- Previsi√≥n de consumo de inventario
- Anticipaci√≥n de necesidades de mantenimiento de flota
- Identificaci√≥n de patrones en reportes ciudadanos

**Algoritmos simples:**
- Promedio m√≥vil
- Regresi√≥n lineal
- An√°lisis de estacionalidad
- Detecci√≥n de anomal√≠as

**Alertas Predictivas:**
- "La recaudaci√≥n de este mes va 20% por debajo de la proyecci√≥n"
- "Se estima que el cemento se agotar√° en 15 d√≠as"
- "El sector X ha aumentado 40% sus reportes vs mes anterior"

**F) Comparativas y Benchmarking:**
- Comparaci√≥n con per√≠odos anteriores (mes actual vs mes anterior, a√±o actual vs a√±o pasado)
- Comparaci√≥n entre parroquias del municipio
- Comparaci√≥n entre dependencias
- Identificaci√≥n de mejores pr√°cticas internas

**G) Cuadro de Mando Integral (Balanced Scorecard):**

**Perspectivas estrat√©gicas:**

**1. Perspectiva Ciudadana:**
- ¬øQu√© tan satisfechos est√°n nuestros ciudadanos?
- KPIs: satisfacci√≥n, tiempo de respuesta, cobertura

**2. Perspectiva de Procesos Internos:**
- ¬øQu√© tan eficientes son nuestras operaciones?
- KPIs: cumplimiento de procedimientos, tiempos de proceso, productividad

**3. Perspectiva de Aprendizaje y Crecimiento:**
- ¬øQu√© tan preparado est√° nuestro personal?
- KPIs: capacitaci√≥n, clima laboral, innovaci√≥n

**4. Perspectiva Financiera:**
- ¬øQu√© tan sostenible es nuestra gesti√≥n?
- KPIs: ejecuci√≥n, recaudaci√≥n, eficiencia del gasto

**Cada perspectiva con objetivos, KPIs, metas e iniciativas**

**H) Visualizaci√≥n Avanzada:**

**Tipos de gr√°ficos:**
- Barras (comparaciones)
- L√≠neas (tendencias temporales)
- Torta (proporciones)
- Mapas de calor (concentraciones geogr√°ficas)
- Gauges/veloc√≠metros (medidores)
- Tablas din√°micas
- Mapas interactivos
- Infograf√≠as

**Interactividad:**
- Filtros din√°micos (por fecha, dependencia, tipo)
- Drill-down (hacer clic para ver detalle)
- Exportaci√≥n de gr√°ficos
- Compartir dashboards

**I) Sala Situacional Virtual:**

**Concepto de War Room digital:**
- Pantalla √∫nica con todos los indicadores cr√≠ticos
- Actualizaci√≥n en tiempo real
- Uso en reuniones gerenciales
- Proyectable en pantalla grande
- Vista consolidada para toma de decisiones r√°pida

**J) Alertas y Notificaciones Inteligentes:**

**Sistema de alertas proactivo:**
- Definici√≥n de umbrales por indicador
- Alertas autom√°ticas cuando se exceden
- Notificaci√≥n por: email, SMS, push notification, dentro del sistema
- Escalamiento si no hay respuesta
- Dashboard de alertas activas

**Ejemplos:**
- Presupuesto de partida X excedido en 10%
- Proyecto Y con 15 d√≠as de atraso
- Recaudaci√≥n 30% por debajo de meta
- Inventario de material Z en punto de reorden
- Veh√≠culo con mantenimiento vencido hace 7 d√≠as

**K) Miner√≠a de Datos (Data Mining B√°sico):**

**Descubrimiento de patrones:**
- Correlaciones entre variables
- Ejemplo: m√°s reportes de basura en sectores con menor frecuencia de recolecci√≥n
- Estacionalidad de problemas
- Segmentaci√≥n de contribuyentes morosos
- Predicci√≥n de demanda de servicios

**L) Reportes de Cumplimiento Legal:**
- Reportes ONAPRE autom√°ticos
- Informes de gesti√≥n para Concejo Municipal
- Memoria y cuenta anual
- Cumplimiento de metas del Plan de Desarrollo Municipal
- Objetivos de Desarrollo Sostenible (ODS) aplicables

---

## üîê **12. M√ìDULO DE ADMINISTRACI√ìN Y SEGURIDAD DEL SISTEMA**

### **¬øQu√© hace este m√≥dulo?**
Controla qui√©n puede hacer qu√© dentro del sistema, protege la informaci√≥n, lleva registro de todas las acciones y permite configurar el sistema seg√∫n las necesidades del municipio.

### **Funcionalidades Detalladas:**

**A) Gesti√≥n de Usuarios:**

**Creaci√≥n de usuarios:**
- Datos b√°sicos: nombre, usuario, email, tel√©fono
- Contrase√±a inicial (debe cambiarla en primer ingreso)
- Vinculaci√≥n a empleado municipal (si aplica)
- Estado: activo, inactivo, bloqueado, suspendido
- Fecha de creaci√≥n y vencimiento (si es temporal)
- √öltimas fechas de acceso

**B) Sistema de Roles y Permisos (RBAC - Role Based Access Control):**

**Roles predefinidos:**

**1. Alcalde:**
- Acceso total a todo el sistema
- Dashboards ejecutivos
- Todas las consultas
- Aprobaciones de alto nivel

**2. Director de Finanzas:**
- M√≥dulo financiero completo
- M√≥dulo de presupuesto
- Aprobaci√≥n de pagos
- Reportes financieros
- Dashboard financiero

**3. Director de Obras:**
- M√≥dulo de proyectos completo
- Seguimiento y control
- Aprobaci√≥n de valuaciones
- Dashboard de obras

**4. Jefe de Tributaci√≥n:**
- M√≥dulo tributario
- Gesti√≥n de contribuyentes
- Emisi√≥n de solvencias
- Gesti√≥n de cobranza
- No puede modificar tasas (eso es del Director)

**5. Operador de Catastro:**
- M√≥dulo de catastro
- Registro de inmuebles
- Emisi√≥n de constancias catastrales
- No puede aprobar permisos de construcci√≥n (solo cargar)

**6. Inspector Municipal:**
- M√≥dulo de catastro (solo lectura)
- Registro de inspecciones
- Carga de reportes fotogr√°ficos
- No puede modificar variables urbanas

**7. Jefe de Recursos Humanos:**
- M√≥dulo de RH completo
- Gesti√≥n de n√≥mina
- Aprobaciones de vacaciones
- Evaluaciones de desempe√±o

**8. Operador de N√≥mina:**
- Carga de novedades
- Procesamiento de n√≥mina
- No puede crear o eliminar empleados
- No puede modificar salarios base (solo con autorizaci√≥n)

**9. Jefe de Servicios P√∫blicos:**
- M√≥dulo de servicios
- Programaci√≥n de rutas
- Asignaci√≥n de cuadrillas
- Control de cumplimiento

**10. Operador de Mesa de Entrada:**
- M√≥dulo documental
- Registro de correspondencia
- No puede eliminar documentos

**11. Almacenista:**
- M√≥dulo de inventario
- Control de entradas/salidas de almac√©n
- Solicitudes de compra
- No puede aprobar compras

**12. Ciudadano (Portal P√∫blico):**
- Consultas de deudas
- Pagos en l√≠nea
- Reportes de problemas
- Seguimiento de tr√°mites
- Solicitud de solvencias
- No acceso a m√≥dulos internos

**13. Auditor Interno:**
- Acceso de solo lectura a TODOS los m√≥dulos
- Reportes de auditor√≠a
- Logs del sistema
- No puede modificar nada

**Permisos granulares:**
Cada rol tiene permisos espec√≠ficos por m√≥dulo y por acci√≥n:
```
Ejemplo: M√≥dulo Financiero
- Ver presupuesto: S√≠
- Modificar presupuesto: No
- Crear compromiso: S√≠
- Aprobar pago <50mil: S√≠
- Aprobar pago >50mil: No
- Ver reportes: S√≠
- Exportar datos: S√≠
- Eliminar registros: No
```

**Permisos especiales:**
- Por dependencia (solo ve datos de su direcci√≥n)
- Por proyecto (solo accede a proyectos asignados)
- Por per√≠odo (solo accede a per√≠odo fiscal actual)
- Horario de acceso permitido (solo en horario laboral)

**C) Autenticaci√≥n Segura:**

**Inicio de sesi√≥n:**
- Usuario y contrase√±a
- Validaci√≥n contra base de datos encriptada
- Contador de intentos fallidos (3 intentos ‚Üí bloqueo temporal)
- Preguntas de seguridad (para recuperaci√≥n)
- CAPTCHA (previene ataques automatizados)

**Pol√≠ticas de contrase√±a:**
- Longitud m√≠nima: 8 caracteres
- Debe incluir: may√∫sculas, min√∫sculas, n√∫meros, s√≠mbolos
- No puede ser igual a las √∫ltimas 5 contrase√±as
- Vencimiento cada 90 d√≠as (obligatorio cambiar)
- No puede incluir datos personales obvios (nombre, c√©dula)

**Autenticaci√≥n de dos factores (2FA) - opcional pero recomendado:**
- C√≥digo de verificaci√≥n enviado por SMS o email
- Aplicaci√≥n autenticadora (Google Authenticator, Authy)
- Obligatorio para roles cr√≠ticos (Alcalde, Directores, Finanzas)

**D) Gesti√≥n de Sesiones:**
- Sesi√≥n activa con tiempo de expiraci√≥n
- Inactividad por 30 minutos ‚Üí cierre autom√°tico de sesi√≥n
- Solo una sesi√≥n activa por usuario
- Si inicia en otro dispositivo ‚Üí cierra la anterior (o alerta de sesi√≥n m√∫ltiple)
- Token de sesi√≥n encriptado

**E) Auditor√≠a y Trazabilidad (Logs):**

**Registro completo de acciones:**

**¬øQu√© se registra?**
- Fecha y hora exacta (timestamp)
- Usuario que realiz√≥ la acci√≥n
- Direcci√≥n IP desde donde se conect√≥
- Dispositivo/navegador
- M√≥dulo accedido
- Acci√≥n realizada: consulta, inserci√≥n, modificaci√≥n, eliminaci√≥n
- Datos antes y despu√©s (para modificaciones)
- Resultado: exitoso, fallido, error

**Ejemplos de logs:**
```
2025-10-10 09:15:23 | Usuario: jperez | IP: 192.168.1.45 | 
Acci√≥n: Modific√≥ proyecto "Reparaci√≥n Calle Principal" | 
Campo: Presupuesto | Valor anterior: 500.000 | Valor nuevo: 550.000

2025-10-10 10:05:12 | Usuario: mrodriguez | IP: 192.168.1.67 | 
Acci√≥n: Aprob√≥ pago #1234 | Monto: 120.000 | Beneficiario: Constructora XYZ

2025-10-10 11:30:45 | Usuario: admin | IP: 192.168.1.10 | 
Acci√≥n: Cre√≥ usuario nuevo | Usuario: ngarcia | Rol: Operador de Catastro

2025-10-10 14:22:10 | Usuario: alopez | IP: 200.35.67.89 | 
Acci√≥n: Intento de acceso a m√≥dulo financiero | Resultado: DENEGADO - Sin permisos
```

**Consulta de logs:**
- Por usuario
- Por m√≥dulo
- Por rango de fechas
- Por tipo de acci√≥n
- Por IP
- Exportable para auditor√≠as

**Retenci√≥n de logs:**
- Almacenamiento de al menos 5 a√±os
- Respaldo externo
- Inmutables (no pueden ser editados ni por el administrador)

**F) Seguridad de Datos:**

**Encriptaci√≥n:**
- Contrase√±as: hash con salt (bcrypt, SHA-256)
- Datos sensibles: encriptados en base de datos (n√∫meros de cuenta, salarios si es muy sensible)
- Comunicaci√≥n: HTTPS (certificado SSL/TLS)
- Respaldos: encriptados

**Protecci√≥n contra ataques:**
- SQL Injection: validaci√≥n y sanitizaci√≥n de entradas
- XSS (Cross-Site Scripting): escapado de HTML
- CSRF (Cross-Site Request Forgery): tokens de validaci√≥n
- Fuerza bruta: bloqueo tras m√∫ltiples intentos fallidos
- Firewall de aplicaci√≥n web (WAF)

**G) Respaldos (Backups):**

**Estrategia 3-2-1:**
- 3 copias de los datos
- 2 tipos diferentes de almacenamiento
- 1 copia fuera del sitio

**Frecuencia:**
- Respaldo completo: semanal (domingos a medianoche)
- Respaldo incremental: diario (diferencias del d√≠a)
- Respaldo de transacciones cr√≠ticas: en tiempo real (bases de datos)

**Verificaci√≥n:**
- Pruebas de restauraci√≥n mensuales
- Verificaci√≥n de integridad de respaldos
- Tiempo de retenci√≥n: 1 a√±o m√≠nimo

**Almacenamiento:**
- Servidor local
- Almacenamiento en la nube (redundancia geogr√°fica)
- Discos externos en b√≥veda f√≠sica

**H) Recuperaci√≥n ante Desastres (Disaster Recovery):**

**Plan de contingencia:**
- Identificaci√≥n de sistemas cr√≠ticos
- RTO (Recovery Time Objective): tiempo m√°ximo de ca√≠da aceptable
- RPO (Recovery Point Objective): p√©rdida m√°xima de datos aceptable
- Procedimientos documentados de restauraci√≥n
- Responsables y contactos de emergencia

**Escenarios:**
- Falla de hardware
- Ataque cibern√©tico (ransomware)
- Desastre natural (inundaci√≥n, incendio)
- Error humano

**I) Configuraci√≥n del Sistema:**

**Par√°metros generales:**
- Nombre del municipio
- Logo oficial (aparece en reportes, recibos)
- RIF del municipio
- Direcci√≥n sede principal
- Tel√©fonos y emails oficiales
- Sitio web
- Redes sociales oficiales

**Configuraci√≥n funcional:**

**Financiero:**
- A√±o fiscal activo
- Estructura presupuestaria (partidas)
- Clasificador de ingresos y gastos
- Bancos con convenio
- Cuentas bancarias municipales

**Tributario:**
- Tasas e impuestos vigentes
- Al√≠cuotas por zona (inmuebles)
- Unidad tributaria local
- Fechas de vencimiento
- Intereses moratorios (%)
- Descuentos por pronto pago

**Catastro:**
- Variables urbanas por zona
- Tipos de permisos
- Tasas de tr√°mites
- Formatos de documentos

**RH:**
- Tabulador de salarios
- Deducciones legales (IVSS, FAOV, paro forzoso)
- D√≠as de vacaciones por antig√ºedad
- Horarios laborales
- Bancos para dispersi√≥n de n√≥mina

**Servicios:**
- Rutas de aseo urbano
- Frecuencias de recolecci√≥n
- Horarios de mercados
- Costos de servicios de cementerio

**J) Gesti√≥n de M√≥dulos Activos:**
- Activaci√≥n/desactivaci√≥n de m√≥dulos seg√∫n necesidad
- Ejemplo: Si el municipio no administra cementerios, desactiva ese m√≥dulo
- Licenciamiento por m√≥dulos (si es sistema comercial)
- Control de funcionalidades beta o en prueba

**K) Notificaciones del Sistema:**

**Configuraci√≥n de alertas:**
- Por email
- Por SMS
- Push notifications (app m√≥vil)
- Dentro del sistema (campanita)

**Tipos de notificaciones:**
- Tareas pendientes
- Documentos por aprobar
- Vencimientos pr√≥ximos
- Alertas cr√≠ticas
- Mensajes de otros usuarios
- Reportes programados

**L) Multiidioma (opcional):**
- Si hay poblaci√≥n ind√≠gena, soporte para lenguas originarias
- Espa√±ol como idioma principal
- Ingl√©s para turismo (si aplica)

**M) Accesibilidad:**
- Cumplimiento de normas WCAG (Web Content Accessibility Guidelines)
- Modo alto contraste para personas con discapacidad visual
- Tama√±o de fuente ajustable
- Navegaci√≥n por teclado
- Compatibilidad con lectores de pantalla

**N) Gesti√≥n de Licencias de Software:**
- Registro de licencias de software utilizados
- Fechas de vencimiento
- Renovaciones
- Costos
- Proveedores

**O) Mantenimiento del Sistema:**

**Programado:**
- Actualizaciones de seguridad
- Parches del sistema
- Optimizaci√≥n de base de datos
- Limpieza de datos temporales
- Notificaci√≥n anticipada a usuarios

**Ventana de mantenimiento:**
- Horarios: fines de semana o madrugadas
- P√°gina de "Sistema en mantenimiento"
- Tiempo estimado

**P) Soporte T√©cnico Interno:**

**Mesa de ayuda:**
- Sistema de tickets para problemas t√©cnicos
- Clasificaci√≥n: hardware, software, red, acceso
- Prioridad: baja, media, alta, cr√≠tica
- Asignaci√≥n a t√©cnico
- SLA (tiempo de respuesta) seg√∫n prioridad
- Base de conocimientos (soluciones comunes)
- Chat de soporte en vivo

**Q) Integraci√≥n con Servicios Externos:**

**APIs configurables:**
- Bancos para pagos electr√≥nicos
- SMS Gateway para notificaciones
- Email SMTP
- Servicios de geolocalizaci√≥n (Google Maps)
- Servicios de verificaci√≥n (SENIAT RIF, SAIME c√©dula)
- Firmas electr√≥nicas certificadas

**R) Exportaci√≥n e Importaci√≥n de Datos:**
- Exportaci√≥n masiva de datos (backup alternativo)
- Formatos: Excel, CSV, PDF, XML, JSON
- Importaci√≥n controlada (validaciones)
- Migraciones de datos de sistemas antiguos

**S) Personalizaci√≥n Visual:**
- Temas de colores institucionales
- Personalizaci√≥n de dashboard por usuario
- Widgets movibles y configurables
- Favoritos y accesos r√°pidos

---

## üåê **13. PORTAL WEB P√öBLICO**

### **¬øQu√© hace este m√≥dulo?**
Es la cara p√∫blica del municipio en internet, donde los ciudadanos acceden a informaci√≥n, realizan tr√°mites, consultan servicios y se comunican con la alcald√≠a sin necesidad de ir presencialmente.

### **Funcionalidades Detalladas:**

**A) P√°gina de Inicio (Home):**

**Elementos principales:**

**Header (cabecera):**
- Logo del municipio
- Escudo y bandera
- Nombre oficial del municipio
- Slogan
- Men√∫ principal de navegaci√≥n
- Barra de b√∫squeda
- Selector de idioma (si aplica)
- Bot√≥n de acceso/login ciudadano
- Iconos de redes sociales
- Modo alto contraste (accesibilidad)
- L√≠nea de atenci√≥n: tel√©fonos, WhatsApp, email

**Slider principal:**
- Carrusel de im√°genes destacadas
- Anuncios importantes
- Obras inauguradas
- Eventos pr√≥ximos
- Enlace a detalles de cada slide

**Noticias destacadas:**
- √öltimas 4-6 noticias del municipio
- Imagen, t√≠tulo, extracto, fecha
- Enlace a noticia completa
- Categor√≠as: obras, eventos, salud, educaci√≥n, deportes, cultural

**Accesos r√°pidos:**
Botones grandes a:
- Pagar tributos
- Reportar problema
- Solicitar solvencia
- Consultar tr√°mites
- Ver proyectos
- Directorio telef√≥nico
- Presupuesto participativo
- Bolsa de empleo

**Eventos pr√≥ximos:**
- Calendario visual
- Pr√≥ximas actividades municipales
- Jornadas, talleres, ferias
- Fecha, hora, lugar

**Galer√≠a de im√°genes:**
- √öltimas actividades con fotos
- Galer√≠a de videos (si tiene canal YouTube)

**Footer (pie de p√°gina):**
- Direcci√≥n f√≠sica de la alcald√≠a
- Tel√©fonos, emails
- Horario de atenci√≥n
- Mapa de ubicaci√≥n (Google Maps embebido)
- Enlaces institucionales
- Redes sociales
- Pol√≠tica de privacidad
- T√©rminos de uso
- Mapa del sitio

**B) Secci√≥n Institucional:**

**El Municipio:**
- Historia del municipio
- Geograf√≠a: l√≠mites, superficie, poblaci√≥n
- Parroquias que lo conforman
- S√≠mbolos: escudo, bandera, himno
- Atractivos tur√≠sticos
- Actividad econ√≥mica principal

**Autoridades:**
- Alcalde o Alcaldesa:
  - Foto oficial
  - Biograf√≠a
  - Propuestas de campa√±a
  - Contacto directo
- Vicealcalde (si existe)
- Concejales:
  - Por cada uno: foto, nombre, partido, contacto
- Directores de dependencias:
  - Organigrama con fotos
  - Responsabilidades

**Misi√≥n, Visi√≥n y Valores:**
- Texto institucional
- Objetivos estrat√©gicos

**Marco Legal:**
- Ley Org√°nica del Poder P√∫blico Municipal
- Ordenanzas municipales (descargables)
- Reglamentos internos
- Gacetas municipales (hist√≥ricas y actuales)

**Plan de Desarrollo Municipal:**
- Ejes estrat√©gicos
- Programas y proyectos
- Metas a corto, mediano y largo plazo
- Descarga del documento completo

**Memorias y Cuentas:**
- Informe anual de gesti√≥n
- Logros del per√≠odo
- Estad√≠sticas
- Descarga en PDF

**C) Transparencia y Acceso a la Informaci√≥n:**

**Cumplimiento de la Ley de Transparencia:**

**Presupuesto Municipal:**
- Presupuesto aprobado del a√±o actual
- Ejecuci√≥n presupuestaria mensual actualizada
- Por partidas, proyectos, dependencias
- Gr√°ficos de ejecuci√≥n
- Descargable en Excel y PDF

**Contrataciones:**
- Licitaciones p√∫blicas:
  - Activas: en proceso de recepci√≥n de ofertas
  - Adjudicadas: ganador, monto
  - Desiertas o anuladas
- √ìrdenes de compra emitidas
- Contratos suscritos (con nombres de contratistas y montos)
- Proceso de cada contrataci√≥n

**N√≥mina Municipal:**
- Listado de empleados (solo: nombre, cargo, dependencia)
- No se publican salarios individuales por privacidad
- S√≠ se publica: costo total de n√≥mina mensual
- Total de empleados por categor√≠a

**Vi√°ticos y Gastos de Representaci√≥n:**
- Si el alcalde o funcionarios viajan, se publica:
  - Destino, motivo, fechas, costo

**Declaraciones Juradas de Patrimonio:**
- Del Alcalde y directores
- Al inicio y fin del per√≠odo
- (Si la ley local lo requiere)

**Subvenciones y Donaciones:**
- A qui√©n se don√≥ o subvencion√≥
- Monto
- Justificaci√≥n

**Bienes Municipales:**
- Inventario de bienes inmuebles
- Veh√≠culos de la alcald√≠a

**Informes de Gesti√≥n:**
- Trimestrales
- Anuales
- Por dependencia

**Calendario de Actividades:**
- Sesiones del Concejo Municipal (fechas)
- Audiencias p√∫blicas
- Rendiciones de cuentas

**Solicitud de Informaci√≥n P√∫blica:**
- Formulario para solicitar informaci√≥n no publicada
- Proceso seg√∫n LOAI
- Tiempo de respuesta: 20 d√≠as h√°biles
- Seguimiento de solicitud

**D) Tr√°mites y Servicios en L√≠nea:**

**Cat√°logo de Tr√°mites:**
Lista completa de todos los tr√°mites disponibles, cada uno con:
- Nombre del tr√°mite
- Descripci√≥n clara
- Requisitos (documentos necesarios)
- Costo (si es gratuito o monto de tasa)
- Tiempo de respuesta estimado
- Dependencia responsable
- Descarga de formularios (PDF rellenable)
- Opci√≥n de iniciar en l√≠nea (si est√° disponible)

**Ejemplos de tr√°mites:**
- Solicitud de solvencia municipal
- Permiso de construcci√≥n
- Renovaci√≥n de patente comercial
- Certificado de residencia
- Constancia catastral
- Certificado de no deudor
- Permiso de espect√°culos p√∫blicos
- Registro de nacimiento (si el municipio lo gestiona)
- Traspaso de veh√≠culo (municipal)
- Permiso de ocupaci√≥n de v√≠a p√∫blica
- Otros seg√∫n competencias

**Tr√°mites 100% en l√≠nea:**
- Solvencia municipal:
  ```
  1. Ciudadano ingresa con c√©dula
  2. Sistema verifica que no tiene deudas
  3. Si est√° solvente, genera PDF con c√≥digo QR
  4. Descarga inmediata
  5. Verificable en l√≠nea por terceros
  ```

- Consulta de deuda tributaria:
  - Ingresa c√©dula o RIF
  - Ve todas sus deudas detalladas
  - Hist√≥rico de pagos

- Certificado catastral:
  - Ingresa n√∫mero de catastro o direcci√≥n
  - Sistema genera certificado
  - Descarga con c√≥digo de verificaci√≥n

**Seguimiento de Expedientes:**
- Ingresa n√∫mero de expediente
- Ve en qu√© etapa est√°
- √öltimo movimiento
- Observaciones
- Tiempo en cada estaci√≥n
- Notificaciones si hay requerimientos

**E) Pagos Electr√≥nicos:**

**Portal de Pagos Integrado:**

**Servicios pagables:**
- Impuesto sobre inmuebles
- Patente comercial (ISAE)
- Impuesto sobre veh√≠culos
- Tasas administrativas
- Multas municipales
- Servicios de cementerio
- Alquiler de espacios
- Otros tributos

**Proceso de pago:**
```
1. Ciudadano selecciona "Pagar en l√≠nea"
2. Ingresa c√©dula/RIF
3. Sistema muestra todas sus deudas
4. Selecciona cu√°l(es) pagar
5. Sistema genera planilla con monto total
6. Elige m√©todo de pago:
   - Pago m√≥vil (genera c√≥digo C2P para bancos venezolanos)
   - Transferencia bancaria (datos de cuentas municipales)
   - Tarjeta de d√©bito/cr√©dito (pasarela de pago)
   - Puntos de pago autorizados (imprime planilla con c√≥digo)
7. Realiza el pago
8. Sube comprobante (si fue transferencia o pago m√≥vil)
9. Sistema valida (puede ser autom√°tico o manual)
10. Recibe recibo digital con c√≥digo de transacci√≥n
11. Se actualiza su estado a "solvente"
```

**Pasarela de pago segura:**
- Certificado SSL
- Encriptaci√≥n de datos bancarios
- Cumplimiento PCI-DSS (est√°ndar de seguridad)
- Recibos con firma digital

**Consulta de pagos realizados:**
- Hist√≥rico de pagos
- Descargar recibos antiguos
- Certificaci√≥n de pagos

**F) Sistema de Reportes Ciudadanos:**

**Interfaz p√∫blica para reportar problemas:**

**Opciones de reporte:**

**1. Desde el Portal Web:**
- Formulario intuitivo
- Selecci√≥n de tipo de problema (lista desplegable)
- Ubicaci√≥n: puede escribir direcci√≥n o marcar en mapa interactivo
- Descripci√≥n del problema (campo de texto)
- Adjuntar hasta 5 fotos
- Datos de contacto (opcional para seguimiento)
- Bot√≥n "Enviar reporte"
- Recibe n√∫mero de ticket: RP-2025-00456
- Confirmaci√≥n por email

**2. Desde App M√≥vil:**
- Misma funcionalidad
- Ventaja: geolocalizaci√≥n autom√°tica con GPS
- Foto directa con c√°mara del tel√©fono
- M√°s r√°pido y conveniente

**Consulta de Estado:**
- Ingresa n√∫mero de ticket
- Ve:
  - Estado actual
  - Fecha de reporte
  - Tipo de problema
  - Ubicaci√≥n
  - Descripci√≥n
  - Fotos adjuntas
  - Dependencia asignada
  - Fecha estimada de soluci√≥n
  - Actualizaciones
  - Resoluci√≥n final (cuando est√© resuelto)
  - Fotos del "despu√©s"
- Calificar el servicio (cuando est√© resuelto)

**Mapa de Reportes P√∫blicos:**
- Todos los reportes visibles en un mapa
- Filtros: por tipo, por estado, por fecha
- Transparencia total
- Ciudadanos ven que la alcald√≠a responde

**G) Directorio de Servicios Municipales:**

**Contactos completos:**

Por cada dependencia:
- Nombre oficial
- Director/Jefe
- Tel√©fonos (directo y extensiones)
- Email institucional
- Ubicaci√≥n f√≠sica
- Horario de atenci√≥n
- Servicios que presta
- C√≥mo llegar (mapa)

**Emergencias:**
- Bomberos municipal: tel√©fono
- Polic√≠a municipal: tel√©fono
- Protecci√≥n Civil: tel√©fono
- Ambulancias: tel√©fono
- L√≠nea directa con el alcalde

**H) Noticias y Comunicaciones:**

**Blog Municipal:**
- Publicaci√≥n frecuente de noticias
- Inauguraciones de obras
- Eventos realizados
- Logros
- Informaci√≥n de inter√©s comunitario
- Alertas (cortes de agua, cierres de calles)
- Convocatorias

**Cada noticia con:**
- T√≠tulo llamativo
- Fecha de publicaci√≥n
- Categor√≠a/etiquetas
- Contenido con formato (negrita, listas, etc.)
- Im√°genes (galer√≠a)
- Videos embebidos (YouTube)
- Compartir en redes sociales
- Comentarios (moderados)

**Bolet√≠n informativo:**
- Suscripci√≥n por email
- Env√≠o semanal o quincenal
- Resumen de actividades

**Comunicados oficiales:**
- Secci√≥n especial para comunicados formales
- Diferenciados de noticias regulares

**I) Agenda de Eventos:**

**Calendario p√∫blico:**
- Vista mensual
- Todos los eventos municipales
- Jornadas de salud, vacunaci√≥n
- Talleres y capacitaciones
- Actividades deportivas
- Eventos culturales (teatro, cine, conciertos)
- Sesiones del Concejo Municipal
- Cabildo abierto

**Cada evento con:**
- Nombre
- Fecha y hora
- Lugar exacto
- Descripci√≥n
- Es gratuito o tiene costo
- Inscripci√≥n (si requiere)
- Cupo limitado o abierto
- Contacto para m√°s informaci√≥n
- Compartir en redes

**J) Proyectos Municipales:**

**Mapa interactivo de proyectos:**
- Todos los proyectos del municipio visibles en mapa
- Filtros: en ejecuci√≥n, culminados, por √°rea (vialidad, salud, deportes)
- Al hacer clic en cada proyecto:
  - Nombre
  - Descripci√≥n
  - Presupuesto
  - % de avance
  - Fecha inicio y fin estimada
  - Beneficiarios
  - Fotos del progreso (carrusel)
  - Contratista
  - Responsable municipal

**Galer√≠a de Obras Culminadas:**
- Antes y despu√©s
- Impacto en la comunidad

**K) Presupuesto Participativo:**

**Plataforma de participaci√≥n:**

**Fase 1: Propuestas:**
- Ciudadanos suben ideas de proyectos
- Formulario: nombre proyecto, descripci√≥n, ubicaci√≥n, beneficio esperado
- Pueden agregar fotos o videos explicativos
- Se discute en foros comunitarios

**Fase 2: Evaluaci√≥n T√©cnica:**
- Alcald√≠a eval√∫a viabilidad
- Publica proyectos factibles con presupuesto real
- Explica los rechazados

**Fase 3: Votaci√≥n:**
- Plataforma de votaci√≥n abierta durante 2-4 semanas
- Ciudadanos votan (con c√©dula, 1 voto por persona)
- Pueden votar m√∫ltiples proyectos
- Conteo p√∫blico y transparente en tiempo real

**Fase 4: Resultados:**
- Publicaci√≥n de proyectos ganadores
- Compromiso de ejecuci√≥n
- Cronograma

**Seguimiento de Ejecuci√≥n:**
- Cada proyecto ganador se ejecuta con transparencia total
- Actualizaci√≥n de avances

**L) Bolsa de Empleo Municipal:**

**Secci√≥n de Recursos Humanos P√∫blica:**

**Convocatorias abiertas:**
- Vacantes disponibles
- Cargo
- Perfil requerido (estudios, experiencia)
- Funciones
- Remuneraci√≥n estimada
- C√≥mo aplicar

**Postulaci√≥n en l√≠nea:**
- Registro en plataforma
- Carga de CV (PDF)
- Formulario de datos
- Recibe n√∫mero de postulaci√≥n
- Seguimiento del proceso

**M) Consultas e Interacci√≥n:**

**Formulario de contacto:**
- Nombre, email, tel√©fono
- Asunto
- Mensaje
- Sistema genera ticket
- Respuesta en m√°ximo 5 d√≠as h√°biles
- Ciudadano puede ver estado de su consulta

**Buz√≥n de Sugerencias:**
- An√≥nimo o identificado
- Ideas para mejorar servicios
- Alcald√≠a revisa y puede implementar

**Chat en vivo (opcional):**
- Atenci√≥n en horario laboral
- Chatbot para preguntas frecuentes
- Conexi√≥n con operador humano si es necesario

**N) Galer√≠as Multimedia:**

**Galer√≠a de Fotos:**
- Organizadas por eventos
- √Ålbumes de inauguraciones
- Actividades comunitarias
- Antes/despu√©s de obras
- Descargables

**Galer√≠a de Videos:**
- Canal YouTube embebido
- Videos institucionales
- Cobertura de eventos
- C√°psulas educativas
- Transmisiones en vivo (sesiones del Concejo)

**O) Educaci√≥n Ciudadana:**

**Secci√≥n informativa:**
- ¬øQu√© son los tributos municipales y para qu√© se usan?
- Derechos y deberes del ciudadano
- C√≥mo hacer un tr√°mite paso a paso (tutoriales)
- Videos explicativos
- Infograf√≠as
- Preguntas frecuentes (FAQ)

**P) Participaci√≥n Comunitaria:**

**Consejos Comunales:**
- Listado de consejos comunales del municipio
- Datos de contacto
- Proyectos ejecutados con cada uno
- C√≥mo registrar un consejo comunal

**Organizaciones Sociales:**
- Directorio de organizaciones
- Fundaciones
- Asociaciones civiles
- Cooperativas

**Q) Turismo y Cultura:**

**Gu√≠a tur√≠stica del municipio:**
- Sitios de inter√©s
- Monumentos hist√≥ricos
- Museos
- Gastronom√≠a local
- Fiestas tradicionales
- C√≥mo llegar
- Mapas tur√≠sticos descargables

**Agenda cultural:**
- Casa de la cultura (si existe)
- Biblioteca municipal
- Eventos art√≠sticos
- Exposiciones
- Talleres

**R) Accesibilidad y Usabilidad:**

**Dise√±o responsive:**
- Se adapta a: PC, tablet, m√≥vil
- Navegaci√≥n f√°cil en cualquier dispositivo

**Cumplimiento de est√°ndares web:**
- HTML5, CSS3
- Velocidad de carga optimizada
- Compatible con todos los navegadores

**SEO (Optimizaci√≥n para motores de b√∫squeda):**
- F√°cil de encontrar en Google
- Palabras clave: "alcald√≠a de [municipio]", "tr√°mites [municipio]", etc.

**S) Integraci√≥n con Redes Sociales:**
- Widgets de Facebook, Twitter/X, Instagram
- Publicaciones recientes del municipio
- Botones de compartir
- Seguimiento de hashtags oficiales

**T) Estad√≠sticas del Portal:**
- Contador de visitas
- P√°ginas m√°s visitadas
- Tr√°mites m√°s solicitados
- Para mejorar continuamente

**U) Seguridad del Portal:**
- Certificado SSL (https://)
- Protecci√≥n contra ataques
- Validaci√≥n de formularios
- Backup diario del sitio

---

## üì± **14. APLICACI√ìN M√ìVIL CIUDADANA**

### **¬øQu√© hace este m√≥dulo?**
Lleva los servicios municipales al bolsillo de cada ciudadano mediante una app para smartphones, facilitando la interacci√≥n con la alcald√≠a desde cualquier lugar y en cualquier momento.

### **Funcionalidades Detalladas:**

**A) Caracter√≠sticas Generales de la App:**

**Plataformas:**
- Android (Google Play Store)
- iOS (Apple App Store)
- Dise√±o nativo o h√≠brido (Flutter, React Native)

**Nombre de la app:**
- "Mi Municipio [Nombre]"
- "Alcald√≠a [Nombre] en tu mano"
- Logo del municipio como icono

**Requisitos t√©cnicos:**
- Android 6.0 o superior
- iOS 12.0 o superior
- Conexi√≥n a internet (WiFi o datos m√≥viles)
- Permisos: c√°mara, ubicaci√≥n, notificaciones, almacenamiento

**B) Onboarding (Primera vez):**

**Proceso de registro:**
```
1. Descarga la app
2. Pantalla de bienvenida (slider de 3-4 pantallas explicando funcionalidades)
3. Registro:
   - N√∫mero de c√©dula
   - Nombre completo
   - Email
   - Tel√©fono
   - Contrase√±a
   - Foto (opcional)
4. Verificaci√≥n:
   - C√≥digo SMS al tel√©fono registrado
   - Confirma c√≥digo
5. Activaci√≥n de cuenta
6. Tutorial r√°pido de uso
7. Solicita permisos necesarios (ubicaci√≥n, c√°mara, notificaciones)
8. Listo para usar
```

**Login:**
- Usuario: c√©dula o email
- Contrase√±a
- Recordar sesi√≥n
- Recuperaci√≥n de contrase√±a
- Biom√©trico (huella o Face ID) - opcional

**C) Pantalla Principal (Home):**

**Dashboard ciudadano:**

**Banner superior:**
- Saludo personalizado: "¬°Hola, Juan!"
- Foto de perfil
- √çcono de notificaciones (con contador si hay nuevas)

**Accesos directos (iconos grandes):**
- üÜò Reportar Problema
- üí∞ Mis Deudas
- üí≥ Pagar Ahora
- üìÑ Solicitar Solvencia
- üó∫Ô∏è Mis Reportes
- üìã Tr√°mites
- üì¢ Noticias
- üìû Emergencias

**Widget informativo:**
- Pr√≥ximo vencimiento de pago
- Estado de √∫ltimo reporte
- Pr√≥ximo evento municipal

**Men√∫ inferior (tabs):**
- üè† Inicio
- üìç Mapa
- ‚ûï Reportar
- üì¨ Mis Tr√°mites
- üë§ Perfil

**D) M√≥dulo: Reportar Problemas**

**Pantalla optimizada para reportes r√°pidos:**

**Flujo simplificado:**
```
1. Usuario presiona "Reportar Problema"

2. Pantalla con botones de categor√≠a:
   [Bache] [Basura] [Alumbrado] [Fuga de agua]
   [√Årbol ca√≠do] [Se√±al da√±ada] [Otro]

3. Selecciona categor√≠a ‚Üí Se activa autom√°ticamente:

4. Geolocalizaci√≥n:
   - GPS obtiene ubicaci√≥n actual
   - Mapa muestra con pin rojo "Aqu√≠ est√° el problema"
   - Usuario puede ajustar manualmente arrastrando el pin
   - Muestra direcci√≥n aproximada

5. Foto:
   - Bot√≥n grande "Tomar Foto"
   - Abre c√°mara del tel√©fono
   - Toma foto del problema
   - Puede tomar hasta 5 fotos
   - Opci√≥n: subir desde galer√≠a

6. Descripci√≥n:
   - Campo de texto: "Describe el problema"
   - Teclado aparece autom√°ticamente
   - M√°ximo 500 caracteres

7. Datos de contacto:
   - Pre-llenado con datos de perfil
   - Puede editarlos o marcar "Reportar an√≥nimamente"

8. Bot√≥n "Enviar Reporte" grande y colorido

9. Confirmaci√≥n:
   - ‚úÖ "¬°Reporte enviado!"
   - N√∫mero de ticket: RP-2025-01234
   - "Te notificaremos cuando lo atendamos"
   - Opci√≥n: "Ver mis reportes"
```

**Ventajas del m√≥vil:**
- Foto instant√°nea de calidad
- Ubicaci√≥n exacta con GPS
- Rapidez (menos de 1 minuto en reportar)
- Desde el lugar del problema

**E) M√≥dulo: Mis Reportes**

**Lista de todos los reportes del usuario:**

**Por cada reporte (card):**
- Foto miniatura del problema
- N√∫mero de ticket
- Tipo de problema
- Ubicaci√≥n
- Fecha de reporte
- Estado con color:
  - üü° Recibido (amarillo)
  - üîµ En Proceso (azul)
  - üü¢ Resuelto (verde)
  - üî¥ Rechazado/Inv√°lido (rojo)
- Hace X d√≠as
- Bot√≥n "Ver detalles"

**Vista detallada de reporte:**
- Todas las fotos (galer√≠a deslizable)
- Mapa con ubicaci√≥n exacta
- Descripci√≥n completa
- L√≠nea de tiempo:
  ```
  10 Oct 2025, 8:30 AM - Reporte recibido
  10 Oct 2025, 9:15 AM - Asignado a Direcci√≥n de Obras
  11 Oct 2025, 10:00 AM - Cuadrilla en camino
  11 Oct 2025, 2:30 PM - ‚úÖ Problema resuelto
  ```
- Foto del "despu√©s" (cuando se resolvi√≥)
- Calificaci√≥n del servicio (estrellas)
- Comentarios
- Bot√≥n "Compartir" (WhatsApp, redes)
- Bot√≥n "Reportar problema similar aqu√≠"

**Filtros:**
- Todos / Activos / Resueltos
- Ordenar por: m√°s recientes, m√°s antiguos

**F) M√≥dulo: Mis Deudas y Pagos**

**Consulta de deuda tributaria:**

**Pantalla principal:**
- Resumen:
  ```
  Estado: DEUDOR / SOLVENTE
  Total a pagar: Bs. XXXX
  ```

**Desglose por tributo:**
- Impuesto sobre Inmuebles:
  - Per√≠odos: 2023, 2024, 2025
  - Monto por per√≠odo
  - Intereses de mora
  - Total
- Patente Comercial:
  - Establecimiento: "Bodega La Esquina"
  - Per√≠odo vencido: 2024
  - Monto
- Multas de Tr√°nsito:
  - Fecha de infracci√≥n
  - Tipo
  - Monto

**Bot√≥n "Generar Planilla de Pago"**

**Proceso de pago desde la app:**
```
1. Selecciona deudas a pagar (checkbox)
2. Presiona "Pagar Ahora"
3. Pantalla de m√©todos de pago:
   
   üí≥ Pago M√≥vil (C2P):
   - Genera c√≥digo de referencia
   - Monto total
   - Bancos disponibles: BDV, Banesco, Mercantil...
   - Instrucciones:
     "1. Abre tu app bancaria
      2. Selecciona Pago M√≥vil
      3. Pago a Comercio (C2P)
      4. RIF: J-XXXXXXXX-X
      5. Tel√©fono: 0424-XXXXXXX
      6. Monto: Bs. XXXX
      7. Referencia: RP-2025-XXXX"
   - Bot√≥n "Copiar referencia"
   - Bot√≥n "Ya realic√© el pago"

   üè¶ Transferencia Bancaria:
   - Muestra datos de cuentas bancarias del municipio
   - Bancos: Venezuela, Bicentenario, etc.
   - N√∫meros de cuenta
   - Bot√≥n "Copiar n√∫mero de cuenta"
   - Referencia a colocar
   
   üíµ Pagar en Taquilla:
   - Descarga PDF de planilla
   - Con c√≥digo QR
   - Llevar a taquilla municipal o banco autorizado

4. Usuario realiza pago en su banco

5. Regresa a app, presiona "Subir Comprobante"
   - Toma foto del comprobante o captura de pantalla
   - Sube al sistema

6. Sistema recibe notificaci√≥n
   - Validaci√≥n (puede ser autom√°tica si hay integraci√≥n bancaria)
   - Si es manual, analista verifica en 24h

7. Notificaci√≥n push: "‚úÖ ¬°Pago verificado!"

8. Estado cambia a SOLVENTE

9. Puede descargar recibo digital
```

**Historial de pagos:**
- Lista de pagos realizados
- Fecha, concepto, monto
- Descargar recibo
- Compartir recibo (WhatsApp, email)

**G) M√≥dulo: Solvencias y Certificaciones**

**Solicitar documentos:**

**Solvencia Municipal:**
- Presiona "Solicitar Solvencia"
- Sistema verifica estado de deuda
- Si est√° solvente:
  - Genera PDF inmediatamente
  - Con c√≥digo QR de verificaci√≥n
  - V√°lida por 30 d√≠as
  - Descarga y comparte
- Si tiene deudas:
  - "No puedes obtener solvencia. Tienes Bs. XXX en deudas"
  - Bot√≥n "Pagar Ahora"

**Otras certificaciones:**
- Certificado catastral
- Constancia de residencia (si aplica)
- Certificado de no deudor
- Proceso similar

**Mis documentos:**
- Todos los certificados descargados
- Almacenados en la app
- Acceso offline
- Compartir por WhatsApp, email, etc.

**H) M√≥dulo: Tr√°mites**

**Cat√°logo de tr√°mites disponibles:**
- Lista completa igual que en web
- Por cada tr√°mite:
  - Nombre
  - Descripci√≥n
  - Requisitos
  - Tiempo estimado
  - Costo
  - Bot√≥n "Iniciar Tr√°mite" o "M√°s informaci√≥n"

**Iniciar tr√°mite desde app:**
- Formulario m√≥vil optimizado
- Campos a llenar
- Adjuntar fotos de documentos (con c√°mara)
- Firma digital (con dedo en pantalla)
- Enviar solicitud
- Recibe n√∫mero de expediente

**Mis Tr√°mites:**
- Todos los tr√°mites iniciados
- Estado de cada uno
- Seguimiento en tiempo real
- Notificaciones de avances
- Alertas si falta alg√∫n documento

**I) M√≥dulo: Noticias e Informaci√≥n**

**Feed de noticias:**
- √öltimas noticias del municipio
- Formato card atractivo
- Imagen, t√≠tulo, fecha, extracto
- Al tocar: abre noticia completa
- Scroll infinito

**Categor√≠as:**
- Todas / Obras / Salud / Educaci√≥n / Eventos / Emergencias

**Notificaciones push:**
- Alcald√≠a puede enviar notificaciones importantes:
  - "Corte de agua programado en sector X"
  - "Nueva obra inaugurada en tu sector"
  - "¬°Lleg√≥ el situado! Pronto obras en tu comunidad"
  - "Alerta: Lluvias intensas pr√≥ximas 48h"
  - "Jornada de vacunaci√≥n este s√°bado"
- Usuario puede personalizar qu√© notificaciones quiere recibir

**J) M√≥dulo: Mapa Interactivo**

**Vista de mapa del municipio:**

**Capas de informaci√≥n:**
- üìç Todos los reportes ciudadanos (pins coloreados por tipo)
- üöß Proyectos en ejecuci√≥n
- üèõÔ∏è Oficinas municipales
- üè• Ambulatorios
- üè´ Escuelas municipales
- üè™ Mercados
- ‚öΩ Canchas y parques
- üöí Estaci√≥n de bomberos
- üëÆ Comandos policiales

**Interacci√≥n:**
- Zoom in/out
- Tocar un pin ‚Üí muestra informaci√≥n
- Navegaci√≥n GPS a ese punto (integraci√≥n con Google Maps o Waze)
- Filtros: mostrar solo un tipo de informaci√≥n

**"Cerca de m√≠":**
- Muestra servicios municipales cercanos a ubicaci√≥n actual
- "Ambulatorio m√°s cercano: 800 metros"
- Bot√≥n "C√≥mo llegar"

**K) M√≥dulo: Emergencias**

**Acceso r√°pido a n√∫meros de emergencia:**

**Botones grandes:**
- üöí Bomberos: [Tel√©fono]
  - Bot√≥n "Llamar ahora" (marca directamente)
- üëÆ Polic√≠a Municipal: [Tel√©fono]
- üöë Ambulancia: [Tel√©fono]
- üõ°Ô∏è Protecci√≥n Civil: [Tel√©fono]
- üìû L√≠nea Alcalde: [Tel√©fono]

**Reportar emergencia desde app:**
- Formulario r√°pido de emergencia
- Tipo: incendio, inundaci√≥n, accidente, etc.
- Ubicaci√≥n GPS autom√°tica
- Descripci√≥n breve
- Foto
- Env√≠o prioritario
- Notificaci√≥n inmediata a autoridades

**Alertas de emergencia:**
- Sistema puede enviar alertas masivas:
  - "‚ö†Ô∏è Alerta de inundaci√≥n en sectores bajos"
  - "üî• Incendio forestal activo, mant√©ngase alejado de zona X"
  - "üå™Ô∏è Alerta meteorol√≥gica: vientos fuertes pr√≥ximas 6 horas"

**L) M√≥dulo: Mi Perfil**

**Datos del usuario:**
- Foto de perfil (editable)
- Nombre completo
- C√©dula
- Email
- Tel√©fono
- Direcci√≥n
- Fecha de nacimiento
- Bot√≥n "Editar datos"

**Configuraciones:**
- Cambiar contrase√±a
- Notificaciones:
  - Push notifications (activar/desactivar)
  - Por tipo: reportes, pagos, noticias, emergencias
  - Sonido y vibraci√≥n
- Privacidad:
  - Permitir ubicaci√≥n
  - Reportes an√≥nimos por defecto
- Idioma (si multiidioma)
- Tema: claro / oscuro

**Mis estad√≠sticas:**
- Reportes realizados: X
- Reportes resueltos: Y
- Tasa de resoluci√≥n: Z%
- Calificaci√≥n promedio dada: ‚≠ê‚≠ê‚≠ê‚≠ê
- Ciudadano activo desde: [fecha]

**Ayuda y soporte:**
- Preguntas frecuentes (FAQ)
- Tutorial de uso (repetir onboarding)
- Cont√°ctanos (formulario)
- Acerca de la app (versi√≥n, cr√©ditos)
- T√©rminos y condiciones
- Pol√≠tica de privacidad

**Cerrar sesi√≥n**

**M) Funcionalidades Transversales:**

**Notificaciones Push:**
- Cada reporte actualizado
- Deuda pr√≥xima a vencer
- Tr√°mite con novedad
- Eventos pr√≥ximos en tu sector
- Noticias destacadas
- Emergencias

**Uso offline:**
- Consulta de documentos descargados
- Ver reportes anteriores (cache)
- Preparar reportes (se env√≠a cuando tenga conexi√≥n)

**Compartir:**
- Todo contenido compartible a:
  - WhatsApp (principalmente)
  - Facebook
  - Twitter/X
  - Instagram
  - Email
  - Mensaje de texto

**Escaneo de c√≥digos QR:**
- Verificaci√≥n de solvencias
- Verificaci√≥n de documentos
- Pagos con QR (si bancos lo soportan)

**N) Gamificaci√≥n (Opcional):**

**Motivar participaci√≥n ciudadana:**

**Sistema de puntos:**
- Por cada reporte v√°lido: +10 puntos
- Por calificar servicio: +5 puntos
- Por participar en presupuesto participativo: +20 puntos
- Por pagar a tiempo: +5 puntos

**Niveles:**
- Ciudadano Novato (0-50 pts)
- Ciudadano Activo (51-200 pts)
- Ciudadano Comprometido (201-500 pts)
- Ciudadano Estrella (500+ pts)

**Reconocimientos:**
- Insignias digitales
- Ranking de ciudadanos m√°s activos (an√≥nimo o con consentimiento)
- Beneficios: descuentos en tributos, reconocimientos p√∫blicos

**Retos comunitarios:**
- "Reportemos 100 problemas este mes"
- "Limpieza del sector: participa y gana puntos"

**O) Integraci√≥n con Redes Sociales:**
- Login social (Facebook, Google)
- Compartir logros
- Invitar amigos a descargar la app

**P) Accesibilidad:**
- Modo alto contraste
- Tama√±o de texto ajustable
- Compatibilidad con lectores de pantalla (TalkBack, VoiceOver)
- Navegaci√≥n por voz (integraci√≥n con asistentes)

**Q) Seguridad:**
- Comunicaci√≥n encriptada (HTTPS)
- Sesi√≥n con timeout
- PIN o biom√©trico para acceso
- Notificaci√≥n de login desde nuevo dispositivo
- Opci√≥n de cerrar todas las sesiones remotamente

**R) Estad√≠sticas de Uso (Backend):**
- Alcald√≠a puede ver:
  - Descargas totales
  - Usuarios activos mensuales
  - Reportes desde app vs web
  - Funcionalidades m√°s usadas
  - Calificaci√≥n de la app (store)
  - Comentarios de usuarios
- Para mejorar continuamente

**S) Actualizaciones:**
- App Store / Play Store
- Notificaci√≥n de actualizaci√≥n disponible
- Mejoras y nuevas funcionalidades
- Correcci√≥n de bugs
- Notas de versi√≥n visibles

---

## üéØ **RESUMEN EJECUTIVO - BENEFICIOS DEL SISTEMA COMPLETO**

**Para la Alcald√≠a:**
- ‚úÖ Transparencia total en la gesti√≥n
- ‚úÖ Eficiencia operativa (menos papel, m√°s rapidez)
- ‚úÖ Mejor toma de decisiones (datos en tiempo real)
- ‚úÖ Control financiero estricto
- ‚úÖ Seguimiento de proyectos preciso
- ‚úÖ Optimizaci√≥n de recursos (flota, inventario, personal)
- ‚úÖ Cumplimiento normativo autom√°tico

**Para los Ciudadanos:**
- ‚úÖ Servicios 24/7 desde casa o m√≥vil
- ‚úÖ Tr√°mites r√°pidos sin colas
- ‚úÖ Transparencia (ven a d√≥nde va su dinero)
- ‚úÖ Participaci√≥n activa (reportes, presupuesto participativo)
- ‚úÖ Mejor calidad de servicios p√∫blicos
- ‚úÖ Comunicaci√≥n directa con autoridades

**Para los Empleados Municipales:**
- ‚úÖ Trabajo m√°s organizado
- ‚úÖ Menos tareas manuales repetitivas
- ‚úÖ Informaci√≥n centralizada
- ‚úÖ Colaboraci√≥n entre dependencias
- ‚úÖ Evaluaci√≥n justa de desempe√±o
- ‚úÖ Autogesti√≥n (vacaciones, recibos de pago)

---

# M√≥dulo de Estructura Organizacional y Departamentos

## üéØ **CONCEPTO Y PROP√ìSITO**

Este m√≥dulo gestiona la **estructura organizacional completa de la alcald√≠a**, incluyendo departamentos, direcciones, unidades, y la asignaci√≥n de usuarios a cada una. Es un m√≥dulo **transversal y fundamental** que afecta a todos los dem√°s m√≥dulos del sistema.

## üèõÔ∏è **JERARQU√çA ORGANIZACIONAL**

```
Alcald√≠a
‚îú‚îÄ‚îÄ Despacho del Alcalde
‚îú‚îÄ‚îÄ Direcciones (nivel estrat√©gico)
‚îÇ   ‚îú‚îÄ‚îÄ Direcci√≥n de Finanzas
‚îÇ   ‚îú‚îÄ‚îÄ Direcci√≥n de Obras P√∫blicas
‚îÇ   ‚îú‚îÄ‚îÄ Direcci√≥n de Recursos Humanos
‚îÇ   ‚îú‚îÄ‚îÄ Direcci√≥n de Servicios P√∫blicos
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ Departamentos (nivel t√°ctico)
‚îÇ   ‚îú‚îÄ‚îÄ Dentro de cada Direcci√≥n
‚îÇ   ‚îú‚îÄ‚îÄ Departamento de Presupuesto
‚îÇ   ‚îú‚îÄ‚îÄ Departamento de Contabilidad
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îî‚îÄ‚îÄ Unidades (nivel operativo)
    ‚îú‚îÄ‚îÄ Unidad de Caja
    ‚îú‚îÄ‚îÄ Unidad de Catastro
    ‚îî‚îÄ‚îÄ ...
```

## üìä **MODELOS DE BASE DE DATOS**

```prisma
// Estructura organizacional jer√°rquica
model Department {
  id          String   @id @default(uuid())
  code        String   @unique // FIN, OBR, RRHH, etc.
  name        String   // "Direcci√≥n de Finanzas"
  shortName   String?  // "Finanzas"
  description String?  @db.Text
  type        DepartmentType // DIRECTION, DEPARTMENT, UNIT
  level       Int      // 1=Direcci√≥n, 2=Departamento, 3=Unidad
  
  // Jerarqu√≠a (auto-referencia)
  parentId    String?
  parent      Department?  @relation("DepartmentHierarchy", fields: [parentId], references: [id])
  children    Department[] @relation("DepartmentHierarchy")
  
  // Responsable del departamento
  headId      String?
  head        User?    @relation("DepartmentHead", fields: [headId], references: [id])
  
  // Metadata
  isActive    Boolean  @default(true)
  email       String?
  phone       String?
  extension   String?  // Extensi√≥n telef√≥nica
  location    String?  // Ubicaci√≥n f√≠sica (piso, oficina)
  
  // Configuraci√≥n
  budget      Decimal? @db.Decimal(15,2) // Presupuesto asignado (si aplica)
  maxStaff    Int?     // N√∫mero m√°ximo de empleados
  
  // Relaciones
  users       UserDepartment[]
  permissions DepartmentPermission[]
  
  createdAt   DateTime @default(now())
  updatedAt   DateTime @updatedAt
  
  @@index([parentId])
  @@index([type])
  @@map("departments")
}

enum DepartmentType {
  MAYOR_OFFICE    // Despacho del Alcalde
  DIRECTION       // Direcci√≥n (nivel estrat√©gico)
  DEPARTMENT      // Departamento (nivel t√°ctico)
  UNIT            // Unidad (nivel operativo)
}

// Relaci√≥n muchos a muchos: Usuarios pueden estar en m√∫ltiples departamentos
model UserDepartment {
  id           String   @id @default(uuid())
  userId       String
  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)
  departmentId String
  department   Department @relation(fields: [departmentId], references: [id], onDelete: Cascade)
  
  // Rol espec√≠fico en este departamento
  role         DepartmentRole @default(MEMBER)
  isPrimary    Boolean  @default(false) // Departamento principal del usuario
  
  assignedAt   DateTime @default(now())
  assignedBy   String?  // ID del usuario que hizo la asignaci√≥n
  
  @@unique([userId, departmentId])
  @@index([userId])
  @@index([departmentId])
  @@map("user_departments")
}

enum DepartmentRole {
  HEAD          // Jefe/Director del departamento
  SUPERVISOR    // Supervisor/Coordinador
  MEMBER        // Miembro regular
  ASSISTANT     // Asistente
}

// Permisos espec√≠ficos por departamento (para casos especiales)
model DepartmentPermission {
  id           String   @id @default(uuid())
  departmentId String
  department   Department @relation(fields: [departmentId], references: [id], onDelete: Cascade)
  
  module       String   // projects, finance, hr, etc.
  action       String   // read, create, update, delete, approve
  canDelegate  Boolean  @default(false) // Puede delegar permisos a subordinados
  
  createdAt    DateTime @default(now())
  
  @@unique([departmentId, module, action])
  @@map("department_permissions")
}

// Actualizar modelo User para incluir relaciones
model User {
  id        String   @id @default(uuid())
  email     String   @unique
  password  String
  firstName String
  lastName  String
  role      Role     @default(USER)
  isActive  Boolean  @default(true)
  
  // Relaci√≥n con departamentos
  departments UserDepartment[]
  headOfDepartments Department[] @relation("DepartmentHead")
  
  // ... resto de campos existentes
  
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  
  @@map("users")
}
```

## üîß **FUNCIONALIDADES DEL M√ìDULO**

### **1. Gesti√≥n de Departamentos (CRUD)**

**Crear Departamento:**
- Nombre y c√≥digo √∫nico
- Tipo (Direcci√≥n, Departamento, Unidad)
- Departamento padre (si aplica)
- Jefe/responsable
- Datos de contacto
- Ubicaci√≥n f√≠sica
- Presupuesto asignado (opcional)

**Listar Departamentos:**
- Vista jer√°rquica tipo √°rbol (organigrama)
- Vista de lista plana con filtros
- Filtros: tipo, activo/inactivo, b√∫squeda
- Ordenamiento por nivel, nombre, c√≥digo

**Actualizar Departamento:**
- Cambiar responsable
- Reasignar en jerarqu√≠a
- Activar/desactivar
- Modificar datos de contacto

**Eliminar Departamento:**
- Validar que no tenga empleados asignados
- Validar que no tenga departamentos hijos
- Soft delete (marcar como inactivo)

### **2. Asignaci√≥n de Usuarios a Departamentos**

**Asignar Usuario:**
- Seleccionar usuario
- Seleccionar departamento(s)
- Definir rol en el departamento
- Marcar departamento principal
- Un usuario puede estar en m√∫ltiples departamentos con diferentes roles

**Transferir Usuario:**
- Cambiar de departamento principal
- Mantener hist√≥rico de asignaciones

**Remover Usuario:**
- Quitar de departamento espec√≠fico
- Validar que no sea el jefe del departamento

**Ver Asignaciones:**
- Por usuario: todos sus departamentos
- Por departamento: todos sus miembros

### **3. Organigrama Visual**

**Vista Interactiva:**
- √Årbol jer√°rquico expandible/colapsable
- Cada nodo muestra:
  - Nombre del departamento
  - Jefe actual
  - N√∫mero de empleados
  - Departamentos hijos
- Click para ver detalle
- Drag & drop para reorganizar (con confirmaci√≥n)

**Exportar Organigrama:**
- PDF para impresi√≥n
- Imagen PNG/SVG
- Datos en Excel

### **4. Permisos y Accesos por Departamento**

**Configuraci√≥n de Permisos:**
- Definir qu√© puede hacer cada departamento en cada m√≥dulo
- Ejemplo: Finanzas puede aprobar pagos, Obras solo consultar presupuesto
- Permisos heredables de padre a hijos
- Permisos delegables

**Validaci√≥n de Acceso:**
- Middleware verifica:
  1. Usuario autenticado ‚úì
  2. Usuario tiene rol adecuado ‚úì
  3. Usuario pertenece a departamento con permisos ‚úì
- Log de intentos de acceso denegados

### **5. Reportes y Estad√≠sticas**

**Reportes Disponibles:**
- Empleados por departamento
- Organigrama completo
- Departamentos sin jefe asignado
- Usuarios sin departamento
- Distribuci√≥n de personal por nivel
- Presupuesto por departamento
- Departamentos inactivos

### **6. Integraci√≥n con Otros M√≥dulos**

**Proyectos:**
- Proyecto asignado a departamento responsable
- Reportes de proyectos por departamento

**Finanzas:**
- Presupuesto por departamento
- Gastos por departamento
- Aprobaciones seg√∫n jerarqu√≠a departamental

**Recursos Humanos:**
- N√≥mina agrupada por departamento
- Evaluaciones de desempe√±o por departamento
- Capacitaciones por departamento

**Reportes Ciudadanos:**
- Asignaci√≥n autom√°tica seg√∫n tipo de problema
- Routing a departamento competente

## üé® **DISE√ëO DE INTERFAZ**

### **P√°gina Principal: `/organizacion/departamentos`**

**Layout:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üìä Estructura Organizacional                   ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  [+ Nuevo Departamento]  [üì• Exportar]  [üîÑ]    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                  ‚îÇ                              ‚îÇ
‚îÇ  √Årbol           ‚îÇ  Detalles                    ‚îÇ
‚îÇ  Jer√°rquico      ‚îÇ                              ‚îÇ
‚îÇ                  ‚îÇ  Direcci√≥n de Finanzas       ‚îÇ
‚îÇ  ‚ñº Alcald√≠a      ‚îÇ  C√≥digo: FIN                 ‚îÇ
‚îÇ    ‚ñº Finanzas    ‚îÇ  Jefe: Juan P√©rez           ‚îÇ
‚îÇ      - Presup.   ‚îÇ  Email: finanzas@...         ‚îÇ
‚îÇ      - Contab.   ‚îÇ  Tel√©fono: 0212-1234567     ‚îÇ
‚îÇ    ‚ñº Obras       ‚îÇ  Empleados: 12              ‚îÇ
‚îÇ      - Proyectos ‚îÇ                              ‚îÇ
‚îÇ      - Manten.   ‚îÇ  [Ver Empleados] [Editar]    ‚îÇ
‚îÇ    ‚Ä¢ RRHH        ‚îÇ                              ‚îÇ
‚îÇ                  ‚îÇ                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Componentes Clave:**
- `DepartmentTree` - √Årbol jer√°rquico interactivo
- `DepartmentCard` - Card con informaci√≥n resumida
- `DepartmentForm` - Formulario crear/editar
- `OrgChart` - Organigrama visual avanzado
- `StaffAssignment` - Asignaci√≥n de personal

### **P√°gina de Detalle: `/organizacion/departamentos/[id]`**

**Tabs:**
1. **Informaci√≥n General**
   - Datos del departamento
   - Jefe actual
   - Departamento padre
   - Sub-departamentos

2. **Personal**
   - Lista de empleados asignados
   - Rol de cada uno
   - Bot√≥n "Asignar Empleado"
   - Transferir empleado

3. **Permisos**
   - Matriz de permisos por m√≥dulo
   - Toggle switches para activar/desactivar

4. **Presupuesto** (si aplica)
   - Presupuesto asignado
   - Ejecuci√≥n
   - Comparativas

5. **Actividad**
   - Log de cambios
   - Asignaciones/remociones de personal
   - Cambios de estructura

### **Modal: Asignar Empleado**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Asignar Empleado al Departamento    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                      ‚îÇ
‚îÇ  Empleado: [Buscar empleado... ‚ñº]   ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  Departamento: Direcci√≥n de Finanzas‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  Rol en el departamento:             ‚îÇ
‚îÇ  ‚óã Jefe                              ‚îÇ
‚îÇ  ‚óã Supervisor                        ‚îÇ
‚îÇ  ‚óè Miembro                           ‚îÇ
‚îÇ  ‚óã Asistente                         ‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  ‚òë Marcar como departamento principal‚îÇ
‚îÇ                                      ‚îÇ
‚îÇ  [Cancelar]  [Asignar Empleado]     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

## üîå **API ENDPOINTS**

### **Departamentos**
```javascript
// CRUD b√°sico
GET    /api/departments                    // Listar todos
GET    /api/departments/tree               // √Årbol jer√°rquico
GET    /api/departments/:id                // Detalle
POST   /api/departments                    // Crear
PATCH  /api/departments/:id                // Actualizar
DELETE /api/departments/:id                // Eliminar

// Jerarqu√≠a
GET    /api/departments/:id/children       // Sub-departamentos
GET    /api/departments/:id/ancestors      // Departamentos padre
POST   /api/departments/:id/move           // Mover en jerarqu√≠a

// Personal
GET    /api/departments/:id/staff          // Empleados del departamento
POST   /api/departments/:id/staff          // Asignar empleado
DELETE /api/departments/:id/staff/:userId  // Remover empleado
PATCH  /api/departments/:id/staff/:userId  // Cambiar rol

// Permisos
GET    /api/departments/:id/permissions    // Permisos del departamento
POST   /api/departments/:id/permissions    // Asignar permiso
DELETE /api/departments/:id/permissions/:permId // Remover permiso

// Reportes
GET    /api/departments/stats              // Estad√≠sticas generales
GET    /api/departments/orgchart           // Datos para organigrama
```

### **Usuarios (extensi√≥n)**
```javascript
// Ver departamentos de un usuario
GET    /api/users/:id/departments          // Departamentos asignados

// Asignar/remover departamento
POST   /api/users/:id/departments          // Asignar a departamento
DELETE /api/users/:id/departments/:deptId  // Remover de departamento

// Transferir
POST   /api/users/:id/transfer             // Transferir de departamento
```

## üîê **CONTROL DE ACCESOS**

### **Permisos del M√≥dulo:**
```javascript
const DEPARTMENT_PERMISSIONS = {
  // Administraci√≥n general
  'department:view': 'Ver estructura organizacional',
  'department:create': 'Crear departamentos',
  'department:update': 'Modificar departamentos',
  'department:delete': 'Eliminar departamentos',
  
  // Gesti√≥n de personal
  'department:assign_staff': 'Asignar personal a departamentos',
  'department:remove_staff': 'Remover personal de departamentos',
  'department:transfer_staff': 'Transferir personal entre departamentos',
  
  // Jerarqu√≠a
  'department:reorganize': 'Reorganizar estructura jer√°rquica',
  'department:set_head': 'Asignar jefe de departamento',
  
  // Permisos
  'department:manage_permissions': 'Gestionar permisos de departamentos',
  
  // Reportes
  'department:view_reports': 'Ver reportes organizacionales',
  'department:export': 'Exportar organigrama',
};
```

### **Validaciones Importantes:**
1. **Solo RRHH y Administradores** pueden crear/modificar departamentos
2. **Jefe de departamento** puede ver su equipo pero no modificarlo
3. **Usuario** solo ve su departamento y jefes superiores
4. **Cambios en jerarqu√≠a** requieren aprobaci√≥n de nivel superior
5. **No se puede eliminar** departamento con personal o hijos

## üß™ **CASOS DE USO PRINCIPALES**

### **Caso 1: Nuevo Empleado**
```
Usuario: Director de RRHH

1. Crea usuario en m√≥dulo RRHH
2. Va a Organizaci√≥n ‚Üí Departamentos
3. Busca el departamento destino
4. Click "Asignar Empleado"
5. Selecciona al nuevo empleado
6. Define rol: "Miembro"
7. Marca como departamento principal
8. Sistema env√≠a notificaci√≥n al jefe del departamento
9. Empleado ahora tiene accesos seg√∫n su departamento
```

### **Caso 2: Promoci√≥n (Cambio de Departamento)**
```
Usuario: Director de RRHH

1. Busca al empleado
2. Ve sus asignaciones actuales
3. Click "Transferir"
4. Selecciona nuevo departamento
5. Cambia rol a "Supervisor"
6. Sistema:
   - Registra hist√≥rico
   - Actualiza permisos
   - Notifica a ambos jefes (antiguo y nuevo)
   - Actualiza organigrama
```

### **Caso 3: Consulta de Estructura**
```
Usuario: Cualquier empleado autenticado

1. Va a Organizaci√≥n
2. Ve organigrama completo
3. Puede navegar por √°rbol jer√°rquico
4. Ve departamentos y jefes
5. No ve datos sensibles (salarios, etc.)
6. Puede buscar por nombre de departamento
```

### **Caso 4: Creaci√≥n de Nuevo Departamento**
```
Usuario: Administrador

1. Click "Nuevo Departamento"
2. Llena formulario:
   - Nombre: "Departamento de Sistemas"
   - C√≥digo: SIS
   - Tipo: DEPARTMENT
   - Padre: Direcci√≥n de Administraci√≥n
   - Jefe: Selecciona empleado
3. Guarda
4. Sistema crea departamento y lo ubica en jerarqu√≠a
5. Asigna al jefe autom√°ticamente
6. Organigrama se actualiza
```

## üìà **M√âTRICAS Y REPORTES**

### **Dashboard del M√≥dulo:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  Estructura Organizacional - Resumen         ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                              ‚îÇ
‚îÇ  üìä Estad√≠sticas Generales                   ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Total   ‚îÇ Direcc. ‚îÇ Depart. ‚îÇ Unidades ‚îÇ ‚îÇ
‚îÇ  ‚îÇ 45      ‚îÇ 8       ‚îÇ 22      ‚îÇ 15       ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                              ‚îÇ
‚îÇ  üë• Personal                                 ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Total Empleados ‚îÇ Con Departamento Asig‚îÇ ‚îÇ
‚îÇ  ‚îÇ 350             ‚îÇ 342 (97.7%)         ‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                              ‚îÇ
‚îÇ  üìã Distribuci√≥n por Direcci√≥n               ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê ‚îÇ
‚îÇ  ‚îÇ Finanzas                     ‚îÇ ‚ñà‚ñà‚ñà 45  ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Obras P√∫blicas               ‚îÇ ‚ñà‚ñà‚ñà‚ñà 78 ‚îÇ ‚îÇ
‚îÇ  ‚îÇ RRHH                         ‚îÇ ‚ñà‚ñà 32   ‚îÇ ‚îÇ
‚îÇ  ‚îÇ Servicios P√∫blicos           ‚îÇ ‚ñà‚ñà‚ñà‚ñà‚ñà 95‚îÇ ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò ‚îÇ
‚îÇ                                              ‚îÇ
‚îÇ  ‚ö†Ô∏è  Alertas                                 ‚îÇ
‚îÇ  ‚Ä¢ 3 departamentos sin jefe asignado        ‚îÇ
‚îÇ  ‚Ä¢ 8 empleados sin departamento principal   ‚îÇ
‚îÇ                                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **Reportes Exportables:**
1. **Organigrama Completo** (PDF/PNG)
2. **Listado de Personal por Departamento** (Excel)
3. **Matriz de Responsabilidades** (Excel)
4. **Directorio Telef√≥nico** (PDF)
5. **Estructura de Costos** (si incluye presupuestos)

## üîÑ **FLUJO DE DATOS CON OTROS M√ìDULOS**

### **Con Proyectos:**
```javascript
// Al crear proyecto, se asigna departamento responsable
const project = {
  name: "Reparaci√≥n Calle Principal",
  responsibleDepartmentId: "dept-obras-uuid",
  // ... otros datos
};

// En queries: filtrar proyectos por departamento del usuario
const myDepartmentProjects = await prisma.project.findMany({
  where: {
    responsibleDepartmentId: user.primaryDepartmentId
  }
});
```

### **Con Finanzas:**
```javascript
// Presupuesto asignado por departamento
const departmentBudget = await prisma.budgetItem.findMany({
  where: {
    departmentId: "dept-finanzas-uuid"
  }
});

// Aprobaciones seg√∫n nivel jer√°rquico
if (transaction.amount > 10000) {
  // Requiere aprobaci√≥n del jefe de direcci√≥n
  approver = await getDepartmentHead(user.department.parentId);
}
```

### **Con RRHH:**
```javascript
// N√≥mina agrupada por departamento
const payrollByDept = await prisma.employee.groupBy({
  by: ['departmentId'],
  _sum: {
    salary: true
  }
});

// Evaluaciones de desempe√±o del departamento
const deptEvaluations = await prisma.evaluation.findMany({
  where: {
    employee: {
      departments: {
        some: {
          departmentId: currentDeptId
        }
      }
    }
  }
});
```

### **Con Reportes Ciudadanos:**
```javascript
// Auto-asignaci√≥n seg√∫n tipo de problema
const problemDepartmentMapping = {
  'bache': 'dept-obras',
  'basura': 'dept-aseo',
  'alumbrado': 'dept-servicios',
  'fuga_agua': 'dept-agua',
};

// Al crear reporte
const report = await prisma.citizenReport.create({
  data: {
    type: 'bache',
    assignedDepartmentId: problemDepartmentMapping['bache'],
    // ...
  }
});
```

## üéØ **PRIORIDAD DE IMPLEMENTACI√ìN**

Este m√≥dulo debe implementarse **TEMPRANO** (despu√©s de autenticaci√≥n, antes o en paralelo con Proyectos), porque:

1. **Afecta a todos los m√≥dulos** - Necesario para permisos granulares
2. **Estructura de datos compartida** - Otros m√≥dulos dependen de √©l
3. **Permisos y accesos** - Base para RBAC avanzado
4. **Reportes** - Muchos reportes se agrupan por departamento

### **Orden Sugerido:**
```
FASE 0: Core (Auth + RBAC b√°sico)
FASE 0.5: Estructura Organizacional ‚Üê NUEVO
  ‚îú‚îÄ‚îÄ Modelos de BD
  ‚îú‚îÄ‚îÄ CRUD de departamentos
  ‚îú‚îÄ‚îÄ Asignaci√≥n de usuarios
  ‚îú‚îÄ‚îÄ Organigrama b√°sico
  ‚îî‚îÄ‚îÄ Permisos por departamento
  
FASE 1: Proyectos (ya incluye departamento responsable)
FASE 2: Finanzas (ya incluye presupuesto por departamento)
...
```

## üìù **CONSIDERACIONES T√âCNICAS**

### **Performance:**
- Usar **recursive CTEs** en PostgreSQL para queries jer√°rquicas eficientes
- Cachear √°rbol de departamentos (cambia poco)
- √çndices en `parentId` para queries r√°pidas

### **Ejemplo Query Recursiva:**
```javascript
// Obtener todos los ancestros de un departamento
const getAncestors = async (departmentId) => {
  return await prisma.$queryRaw`
    WITH RECURSIVE ancestors AS (
      SELECT * FROM departments WHERE id = ${departmentId}
      UNION ALL
      SELECT d.* FROM departments d
      INNER JOIN ancestors a ON d.id = a."parentId"
    )
    SELECT * FROM ancestors;
  `;
};

// Obtener todo el sub√°rbol de un departamento
const getDescendants = async (departmentId) => {
  return await prisma.$queryRaw`
    WITH RECURSIVE descendants AS (
      SELECT * FROM departments WHERE id = ${departmentId}
      UNION ALL
      SELECT d.* FROM departments d
      INNER JOIN descendants desc ON d."parentId" = desc.id
    )
    SELECT * FROM descendants;
  `;
};
```

### **Validaciones Cr√≠ticas:**
```javascript
// No permitir ciclos en jerarqu√≠a
const validateNoCycle = async (deptId, newParentId) => {
  const ancestors = await getAncestors(newParentId);
  if (ancestors.some(a => a.id === deptId)) {
    throw new Error('No se puede crear ciclo en jerarqu√≠a');
  }
};

// Validar l√≠mite de empleados
const validateMaxStaff = async (deptId) => {
  const dept = await prisma.department.findUnique({
    where: { id: deptId },
    include: { _count: { select: { users: true } } }
  });
  
  if (dept.maxStaff && dept._count.users >= dept.maxStaff) {
    throw new Error('Departamento ha alcanzado l√≠mite de personal');
  }
};
```

### **Seeds de Ejemplo:**
```javascript
// prisma/seeds/departments.js
const seedDepartments = async () => {
  // Nivel 1: Direcciones
  const finanzas = await prisma.department.create({
    data: {
      code: 'FIN',
      name: 'Direcci√≥n de Finanzas',
      type: 'DIRECTION',
      level: 1,
    }
  });
  
  // Nivel 2: Departamentos
  await prisma.department.createMany({
    data: [
      {
        code: 'FIN-PRES',
        name: 'Departamento de Presupuesto',
        type: 'DEPARTMENT',
        level: 2,
        parentId: finanzas.id,
      },
      {
        code: 'FIN-CONT',
        name: 'Departamento de Contabilidad',
        type: 'DEPARTMENT',
        level: 2,
        parentId: finanzas.id,
      }
    ]
  });
};
```

---

